<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>ComApproveHistoryModi.mxml</title>
<link rel="stylesheet" type="text/css" href="../../../../../SourceStyles.css"/>
</head>

<body><pre><span class="MXMLProcessing_Instruction">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="MXMLComponent_Tag">&lt;s:TitleWindow</span><span class="MXMLDefault_Text"> xmlns:fx="</span><span class="MXMLString">http://ns.adobe.com/mxml/2009</span><span class="MXMLDefault_Text">"
               xmlns:s="</span><span class="MXMLString">library://ns.adobe.com/flex/spark</span><span class="MXMLDefault_Text">"
               xmlns:mx="</span><span class="MXMLString">library://ns.adobe.com/flex/mx</span><span class="MXMLDefault_Text">"
               xmlns:launch="</span><span class="MXMLString">common.flow.view.launch.*</span><span class="MXMLDefault_Text">"
               xmlns:datagrid="</span><span class="MXMLString">common.components.datagrid.*</span><span class="MXMLDefault_Text">"
               xmlns:components="</span><span class="MXMLString">common.components.*</span><span class="MXMLDefault_Text">"
               width="</span><span class="MXMLString">700</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">500</span><span class="MXMLDefault_Text">" title="</span><span class="MXMLString">流程修改</span><span class="MXMLDefault_Text">" initialize="</span><span class="ActionScriptDefault_Text">init</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">"  close="</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">PopUpManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removePopUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;fx:Script&gt;</span>
        &lt;![CDATA[
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">app</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GlobalUtil</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArgsEvent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">services</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlowInstenceService</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">services</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlowNodeInstenceService</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">services</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlowOprtModuleService</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlowNodeInstence</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlowNodeModel</span>;
            
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">common</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">model</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BeginNode</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">common</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">model</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">EndNode</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">common</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">model</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Node</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">common</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">model</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SingleLine</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">common</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">model</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SpecialTaskNode</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">common</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">model</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TaskNode</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">common</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FAppCoreUtil</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">common</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TCopyUtil</span>;
            
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">collections</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArrayCollection</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Application</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlexGlobals</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">INavigatorContent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">effects</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Glow</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">managers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PopUpManager</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ResultEvent</span>;
            
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nodes</span>:<span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flowNodeInsteces</span>:<span class="ActionScriptDefault_Text">Array</span>;

            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">] </span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"../assets/icon_Form_01.jpg"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span>  <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gridUp</span>:<span class="ActionScriptDefault_Text">Class</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">] </span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"../assets/icon_Form_02.jpg"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span>  <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gridDown</span>:<span class="ActionScriptDefault_Text">Class</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">] </span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"../assets/icon_Graphics_01.jpg"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span>  <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">graphicUp</span>:<span class="ActionScriptDefault_Text">Class</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">] </span><span class="ActionScriptMetadata">Embed</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"../assets/icon_Graphics_02.jpg"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span>  <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">graphicDown</span>:<span class="ActionScriptDefault_Text">Class</span>;
            
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">EVENT_APPHIS_EDIT_OK</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"apphis_edit_ok"</span>;
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FAppCore</span>:<span class="ActionScriptDefault_Text">GlobalUtil</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">GlobalUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">service</span>:<span class="ActionScriptDefault_Text">FlowInstenceService</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">FlowInstenceService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nodeSpace</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">=</span>120;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">thisStageWidth</span> :<span class="ActionScriptDefault_Text">Number</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">thisStageHeight</span> :<span class="ActionScriptDefault_Text">Number</span>; 
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentNodeX</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nodeSpace</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentNodeY</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 50;
            
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">allOptyModelList</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">maxNumber</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>0;
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">init</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">showLoading</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">FlowOprtModuleService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GetAll</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">""</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addResultListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">GetAllOptyModelResult</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">GetAllOptyModelResult</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">allOptyModelList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">result</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Array</span>;
                <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">closeLoading</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">//定义渲染器中用到的回调函数
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">cellColor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">dataField</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">data</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">//设置前两页显示颜色  dataField=="WarnTag" &amp;&amp;
</span>                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span>  <span class="ActionScriptDefault_Text">data</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">"WarnTag"</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">==</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">return</span> 0xFF0000;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptComment">//设置默认显示颜色
</span>                <span class="ActionScriptReserved">return</span> 0x000000;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">initGrid</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>   <span class="ActionScriptComment">//grid初始化
</span>            <span class="ActionScriptBracket/Brace">{</span>            
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">headerArr</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">"审核ID"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"InstID"</span><span class="ActionScriptOperator">,</span>0<span class="ActionScriptOperator">,</span><span class="ActionScriptString">""</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">FAppCoreUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fcInteger</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span>                                               
                    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">"审批人"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"HandlerName"</span><span class="ActionScriptOperator">,</span>100<span class="ActionScriptOperator">,</span><span class="ActionScriptString">""</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">FAppCoreUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fcString</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">"职务"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"FlowRoleName"</span><span class="ActionScriptOperator">,</span>100<span class="ActionScriptOperator">,</span><span class="ActionScriptString">""</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">FAppCoreUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fcString</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">]</span>
                <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">with</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">RemoteDest</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"GenericDestination"</span>;
                    <span class="ActionScriptDefault_Text">RemoteSource</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"Ccspm.FlowInstenceBLL"</span>;
                    <span class="ActionScriptDefault_Text">RemoteOperation</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"getHistory"</span>;             
                    <span class="ActionScriptDefault_Text">isPage</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">AutoLoad</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptDefault_Text">isMulPage</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">ShowUpGuide</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">ShowDownGuide</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptComment">//PageCount = 20;                
</span>                    <span class="ActionScriptComment">// 用户自己初次未进入流程（42:未进入流程  136:流程中 137:流程结束 138:退回；）
</span>                    <span class="ActionScriptComment">//WhereStr=" FlowState in(42,138) and BudgetSourceId=45 and  Applyer='"+FAppCore.FCusUser.UserId.toString()+"'"; // Enabled=1 and ，未进入流程、退回（ 42:未进入流程  136：流程中 137 ：流程结束 138 ：退回；）
</span>                    <span class="ActionScriptDefault_Text">UserID</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserId</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">CustomColumnsModuleName</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"ApproveHistory"</span>;
                    <span class="ActionScriptDefault_Text">HeaderArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">headerArr</span>;
                    <span class="ActionScriptDefault_Text">cellColorFunc</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">cellColor</span>;
                    
                <span class="ActionScriptBracket/Brace">}</span>             
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptASDoc">/**
             * 获取审批历史数据 根据业务类型、业务ID
             * */</span>
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span>  <span class="ActionScriptDefault_Text">setApproveHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">arr</span>:<span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>  
            <span class="ActionScriptBracket/Brace">{</span>               
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mArr</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">OnlyInit</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ManualProvider</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mArr</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">getFlowNodeInstenceListOk</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getFlowNodeInstenceListOk</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">arr</span>:<span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>        
                <span class="ActionScriptDefault_Text">drawCanvas</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Lines</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeAll</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">drawCanvas</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeAllChildren</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">nodes</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                <span class="ActionScriptDefault_Text">nodes</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">flowNodeInsteces</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">arr</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentNode</span>:<span class="ActionScriptDefault_Text">Node</span>;
                <span class="ActionScriptDefault_Text">thisStageWidth</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stage</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span>;
                <span class="ActionScriptDefault_Text">thisStageHeight</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stage</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">beginNodeModel</span>:<span class="ActionScriptDefault_Text">FlowNodeModel</span>;
                <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flowNodeInstece</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">flowNodeInsteces</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNodeInstece</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptOperator">-</span>1 <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">flowNodeInstece</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptOperator">-</span>3<span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">beginNodeModel</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">changeInstence2Model</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNodeInstece</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">BeginNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"开始"</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">beginNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PointX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nodeSpace</span>;
                        <span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">beginNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PointY</span> <span class="ActionScriptOperator">=</span> 50;
                        <span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeModel</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">beginNodeModel</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentNode</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span> 
                    <span class="ActionScriptDefault_Text">getNextNodes</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">beginNodeModel</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">singleline</span>:<span class="ActionScriptDefault_Text">SingleLine</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextids</span>:<span class="ActionScriptDefault_Text">Array</span>;
                <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">firstnode</span>:<span class="ActionScriptDefault_Text">Node</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">nextids</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">firstnode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NextID</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">secondnode</span>:<span class="ActionScriptDefault_Text">Node</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextid</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">nextids</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span> 
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">secondnode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">nextid</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">singleline</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SingleLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptDefault_Text">singleline</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">beginToEndLine</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">firstnode</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">secondnode</span><span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptDefault_Text">drawCanvas</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">singleline</span><span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptDefault_Text">drawCanvas</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addLines</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">singleline</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">glow</span>:<span class="ActionScriptDefault_Text">Glow</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Glow</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">glow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">color</span><span class="ActionScriptOperator">=</span> 0xff0000;
                <span class="ActionScriptDefault_Text">glow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">repeatDelay</span> <span class="ActionScriptOperator">=</span> 100; 
                <span class="ActionScriptDefault_Text">glow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">duration</span> <span class="ActionScriptOperator">=</span> 700;
                <span class="ActionScriptDefault_Text">glow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">blurXTo</span> <span class="ActionScriptOperator">=</span> 20;
                <span class="ActionScriptDefault_Text">glow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">blurYTo</span> <span class="ActionScriptOperator">=</span> 20; 
                <span class="ActionScriptDefault_Text">glow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">repeatCount</span> <span class="ActionScriptOperator">=</span> 0;  
                <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">node</span>:<span class="ActionScriptDefault_Text">Node</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">node</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">allowHMove</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">node</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">allowVMove</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>; 
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">node</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeMark</span> <span class="ActionScriptOperator">==</span><span class="ActionScriptString">'142'</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">glow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">target</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">node</span>;
                        <span class="ActionScriptDefault_Text">glow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">play</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; 
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptDefault_Text">node</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">contextMenu</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ContextMenu</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">drawCanvas</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">node</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>    
            <span class="ActionScriptBracket/Brace">}</span>
            
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">FlowhistoryGridHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">eventType</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">eventType</span> <span class="ActionScriptOperator">==</span><span class="ActionScriptString">"flowhistoryGridBtClick"</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">gridBt</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selected</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptDefault_Text">graphicBt</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selected</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">viewstack1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedChild</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">gridMain</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">eventType</span> <span class="ActionScriptOperator">==</span><span class="ActionScriptString">"flowhistoryGriphicBtClick"</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">graphicBt</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selected</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptDefault_Text">gridBt</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selected</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">viewstack1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedChild</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">drawCanvas</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getNextNodes</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentNode</span>:<span class="ActionScriptDefault_Text">FlowNodeModel</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tempnextids</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NextID</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextids</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">entriyNextid</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">tempnextids</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">entriyNextid</span> <span class="ActionScriptOperator">!=</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">nextids</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">entriyNextid</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nextids</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">==</span>0<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">return</span> ;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextNode</span>:<span class="ActionScriptDefault_Text">Node</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextNodeModel</span>:<span class="ActionScriptDefault_Text">FlowNodeModel</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flowNodeModels</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flowNodeModel</span>:<span class="ActionScriptDefault_Text">FlowNodeModel</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>0;<span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">flowNodeInsteces</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>;<span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">flowNodeModel</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">FlowNodeModel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlowID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNodeInsteces</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlowID</span>; 
                    <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ModuleCode</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNodeInsteces</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ModuleCode</span>;
                    <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NextID</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNodeInsteces</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span>;
                    <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNodeInsteces</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span>;
                    <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeID</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNodeInsteces</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeID</span>; 
                    <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNodeInsteces</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span>; 
                    <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeName</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNodeInsteces</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">HandlerName</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"("</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNodeInsteces</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlowRoleName</span> <span class="ActionScriptOperator">+</span><span class="ActionScriptString">")"</span>;
                    <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeMark</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNodeInsteces</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CheckState</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">""</span>; 
                    <span class="ActionScriptDefault_Text">flowNodeModels</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">stepY</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0;
                <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flowNode</span>:<span class="ActionScriptDefault_Text">FlowNodeModel</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">flowNodeModels</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">labelLength</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeName</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeName</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">*</span>12:0<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">labelLength</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">labelLength</span><span class="ActionScriptOperator">&gt;</span><span class="ActionScriptDefault_Text">nodeSpace</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">labelLength</span>:<span class="ActionScriptDefault_Text">nodeSpace</span><span class="ActionScriptBracket/Brace">)</span>;
                    
                    <span class="ActionScriptDefault_Text">currentNodeX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PointX</span>;
                    <span class="ActionScriptDefault_Text">currentNodeY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PointY</span>;
                    <span class="ActionScriptDefault_Text">currentNodeX</span><span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">labelLength</span>;
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentNodeX</span><span class="ActionScriptOperator">+</span>2<span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">labelLength</span><span class="ActionScriptOperator">+</span>24<span class="ActionScriptOperator">&gt;=</span><span class="ActionScriptDefault_Text">thisStageWidth</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">currentNodeY</span><span class="ActionScriptOperator">+=</span><span class="ActionScriptDefault_Text">labelLength</span><span class="ActionScriptOperator">/</span>2;
                        <span class="ActionScriptDefault_Text">currentNodeX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nodeSpace</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    
                    <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextid</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">nextids</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span> 
                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nextid</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">flowNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>                             
                            <span class="ActionScriptReserved">switch</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptReserved">case</span> <span class="ActionScriptOperator">-</span>1:
                                    <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">BeginNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeName</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nodeSpace</span>;
                                    <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> 50;
                                    <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptReserved">case</span> 0:
                                <span class="ActionScriptReserved">case</span> 5:
                                    <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">TaskNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeName</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptReserved">case</span> 1:
                                    <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SpecialTaskNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeName</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptReserved">break</span>; <span class="ActionScriptComment">// 高级节点
</span>                                <span class="ActionScriptReserved">case</span> <span class="ActionScriptOperator">-</span>2:
                                    <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">EndNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeName</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptReserved">break</span>; <span class="ActionScriptComment">// 
</span>                                <span class="ActionScriptReserved">case</span> <span class="ActionScriptOperator">-</span>3:
                                    <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">BeginNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flowNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeName</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nodeSpace</span>;
                                    <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> 50;
                                    <span class="ActionScriptReserved">break</span>; <span class="ActionScriptComment">// 
</span>                            <span class="ActionScriptBracket/Brace">}</span> 
                            <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeModel</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flowNode</span>;
                            <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">flowNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PointX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">currentNodeX</span>;
                            <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">flowNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PointY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">currentNodeY</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">nodeSpace</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">stepY</span><span class="ActionScriptOperator">/</span>2;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">hasAdded</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                            <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">reNode</span>:<span class="ActionScriptDefault_Text">Node</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">reNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptBracket/Brace">)</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptDefault_Text">hasAdded</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeMark</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"142"</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">newarr</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptBracket/Brace">)</span>;
                                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">renodeint</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemIndex</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">reNode</span><span class="ActionScriptBracket/Brace">)</span>;
                                        <span class="ActionScriptDefault_Text">newarr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeItemAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">renodeint</span><span class="ActionScriptBracket/Brace">)</span>
                                        <span class="ActionScriptDefault_Text">nodes</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">newarr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">source</span>;
                                        <span class="ActionScriptDefault_Text">hasAdded</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">hasAdded</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptDefault_Text">getNextNodes</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeModel</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptOperator">-</span>1 <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptOperator">-</span>3   <span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">BeginNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeName</span><span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeModel</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">currentNode</span>;
                                <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nodeSpace</span>;
                                <span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> 50;
                                <span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nextNode</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptDefault_Text">stepY</span><span class="ActionScriptOperator">++</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">changeInstence2Model</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flownodeInstence</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">FlowNodeModel</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flowNodeModel</span>:<span class="ActionScriptDefault_Text">FlowNodeModel</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">FlowNodeModel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlowID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flownodeInstence</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlowID</span>; 
                <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ModuleCode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flownodeInstence</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ModuleCode</span>;
                <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NextID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flownodeInstence</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span>;
                <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flownodeInstence</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span>;
                <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flownodeInstence</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeID</span>; 
                <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flownodeInstence</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span>; 
                <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flownodeInstence</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">HandlerName</span>;<span class="ActionScriptComment">// 把处理人名字 存储在 nodename里面
</span>                <span class="ActionScriptDefault_Text">flowNodeModel</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeMark</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flownodeInstence</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CheckState</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">""</span>; <span class="ActionScriptComment">// 这里把 流程节点的状态  存储在nodemark里
</span>                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">flowNodeModel</span>;
            <span class="ActionScriptBracket/Brace">}</span>         
            
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">add</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">checkSel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptDefault_Text">loadForm</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">update</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">checkSel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptDefault_Text">loadForm</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">loadForm</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isAdd</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">prenode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SelectedItem</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prenode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span><span class="ActionScriptOperator">==</span><span class="ActionScriptOperator">-</span>2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sendSysInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"结束节点不能修改和在其添加，请选择其他节点"</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isAdd</span>  <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prenode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span><span class="ActionScriptOperator">==</span><span class="ActionScriptOperator">-</span>1 <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">prenode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span><span class="ActionScriptOperator">==</span><span class="ActionScriptOperator">-</span>3<span class="ActionScriptBracket/Brace">)</span>  <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sendSysInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"开始节点不能修改，请选择其他节点"</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prenode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptOperator">,</span>2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"P-"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">prenode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptOperator">,</span>2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"L-"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sendSysInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统强制添加的节点，不允许修改"</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">aParent</span>:<span class="ActionScriptDefault_Text">DisplayObject</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">DisplayObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FlexGlobals</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topLevelApplication</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nodeForm</span>:<span class="ActionScriptDefault_Text">ComApproveHistoryModiForm</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">ComApproveHistoryModiForm</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">PopUpManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">createPopUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">aParent</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">ComApproveHistoryModiForm</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">nodeForm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loadData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prenode</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">isAdd</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">allOptyModelList</span><span class="ActionScriptBracket/Brace">)</span>;                
                <span class="ActionScriptDefault_Text">PopUpManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">centerPopUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nodeForm</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">nodeForm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ComApproveHistoryModiForm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">OK_CLICK</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">onAddNode</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onAddNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ArgsEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">showLoading</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">arr</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">args</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Array</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isAdd</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">preNode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptBracket/Brace">[</span>1<span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">addNode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptBracket/Brace">[</span>2<span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isAndNode</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptBracket/Brace">[</span>3<span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isOnePass</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptBracket/Brace">[</span>4<span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isCompetition</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptBracket/Brace">[</span>5<span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gridArr</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">TCopyUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GridData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Array</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">index</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SelectedIndex</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">maxNumber</span><span class="ActionScriptOperator">==</span>0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">maxNumber</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getNewMaxNumber</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">maxNumber</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">maxNumber</span><span class="ActionScriptOperator">+</span>5;
                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nodeNumberName</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getStringFromRight</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">addNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nodeNumberName</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">closeLoading</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sendSysInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"Srroy,节点生成出错,请重新添加!"</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">addNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nodeNumberName</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">maxNumber</span>;
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isAdd</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptComment">//得到选中节点的前置节点
</span>                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">prevBeforeNode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">preNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span> 
                        <span class="ActionScriptDefault_Text">prevBeforeNode</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getPrvNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">preNode</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">)</span>; 
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prevBeforeNode</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">closeLoading</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sendSysInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"Srroy,节点生成出错,找不到前置节点,请重新添加!"</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptReserved">return</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptComment">//添加并节点
</span>                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isAndNode</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prevBeforeNode</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">closeLoading</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sendSysInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"Srroy,节点添加错误,请不要选择开始节点添加并节点。开始节点不能成为并节点"</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptReserved">return</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptComment">//修改并节点参数并返回所有并节点字符串
</span>                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">preNextids</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getNextidsFromAndNodeAndUpdateAndNodeOther</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prevBeforeNode</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">addNode</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">isOnePass</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">isCompetition</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptComment">//判断前轩节点是否为并节点。如果是则所有节点的后续节点进行改变
</span>                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prevBeforeNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Other1</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">prevBeforeNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Other1</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">prevBeforeNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">preNextids</span>;
                        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptComment">//获取前置节点的前置节点使得到所有并节点改变后续节点
</span>                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">prevBeBeNode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getPrvNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prevBeBeNode</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">preBeBeNextids</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">prevBeBeNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">beNode</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">preBeBeNextids</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">beNode</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">continue</span>;
                                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">beAndnode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">beAndnode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptOperator">==</span><span class="ActionScriptDefault_Text">beNode</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">beAndnode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">preNextids</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span> 
                        <span class="ActionScriptComment">//直拉在节点后添加一个节点
</span>                        <span class="ActionScriptComment">//判断前置节点是否并节点，如果是则并节点的后续节点都是此节点
</span>                        <span class="ActionScriptComment">//非并节点，直接改变后置节点
</span>                        <span class="ActionScriptDefault_Text">addNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">preNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span>;
                        <span class="ActionScriptDefault_Text">preNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">","</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">addNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span>;
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">andNodeMark</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">preNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Other1</span>;
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">andNodeMark</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">andNodeMark</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptString">""</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">andNodeMark</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">indexOf</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"&amp;"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptOperator">-</span>1 <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">andNodeMark</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">indexOf</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"｜"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptComment">//为并节点找到所有兄弟节点,将兄弟节点的后续节点改变
</span>                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currNextids</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">prevBeforeNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">andNodeNumber</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">currNextids</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">andNodeNumber</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">continue</span>;
                                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currAndnode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currAndnode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">andNodeNumber</span><span class="ActionScriptBracket/Brace">)</span>
                                        <span class="ActionScriptDefault_Text">currAndnode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">preNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">index</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">preNode</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gridData</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">gridData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addItemAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">addNode</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">index</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">setApproveHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptBracket/Brace">)</span>;    
                    
                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptComment">//修改节点。主要判断是否是并节点。如果是则修改并节点参数
</span>                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">andNodemark</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">preNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Other1</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">andNodemark</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">andNodemark</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">getNextidsFromAndNodeAndUpdateAndNodeOther</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">preNode</span><span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">isOnePass</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">isCompetition</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">index</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">preNode</span>;
                    <span class="ActionScriptDefault_Text">setApproveHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">closeLoading</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">//得到前置节点
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getPrvNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentnode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">nodes</span>:<span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">prvBeforeNode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span>;
                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">node</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextids</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">node</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextnumber</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">nextids</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nextnumber</span><span class="ActionScriptOperator">==</span><span class="ActionScriptDefault_Text">currentnode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">prvBeforeNode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">node</span>;
                            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">prvBeforeNode</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">null</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">//修改并节点参数并返回所有并节点字符串
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getNextidsFromAndNodeAndUpdateAndNodeOther</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">preNode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">addNode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">isOnePass</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">isCompetition</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">nodes</span>:<span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">andNodeMarkOther</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">andnextids</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">preNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">preNextids</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
                <span class="ActionScriptComment">//第一次循环生成并字符串
</span>                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nodeNumber</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">andnextids</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nodeNumber</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">continue</span>;
                    <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currnode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currnode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptOperator">==</span><span class="ActionScriptDefault_Text">nodeNumber</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">andNodeMarkOther</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">nodeNumber</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"|"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isOnePass</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"&amp;"</span>
                            <span class="ActionScriptDefault_Text">preNextids</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">","</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">nodeNumber</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">addNode</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">andNodeMarkOther</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">addNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"|"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isOnePass</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">"&amp;"</span>;
                    <span class="ActionScriptDefault_Text">preNextids</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">","</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">addNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span>;
                    <span class="ActionScriptDefault_Text">andnextids</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">addNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">andNodeMarkOther</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">"$"</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">isCompetition</span>;
                <span class="ActionScriptComment">//第=次循环设置各节点的并字符串
</span>                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">andnodeNumber</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">andnextids</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">andnodeNumber</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">continue</span>;
                    <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currAndnode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currAndnode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptOperator">==</span><span class="ActionScriptDefault_Text">andnodeNumber</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">currAndnode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Other1</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">andNodeMarkOther</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">preNextids</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">//得到当前节点的兄弟结点
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getBrotherNodeList</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentNode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">nodes</span>:<span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">prevNode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getPrvNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentNode</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prevNode</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">return</span> [];
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nodeList</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextids</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">prevNode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">node</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">nodes</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nextnumber</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">nextids</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nextnumber</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">continue</span>;
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">node</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">nextnumber</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptDefault_Text">nodeList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">node</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">nodeList</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">del</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">checkSel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">prenode</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SelectedItem</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prenode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span><span class="ActionScriptOperator">==</span><span class="ActionScriptOperator">-</span>2 <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">prenode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span><span class="ActionScriptOperator">==</span><span class="ActionScriptOperator">-</span>1 <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">prenode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeAttr</span><span class="ActionScriptOperator">==</span><span class="ActionScriptOperator">-</span>3<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sendSysInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"开始与结束节点不能删除，请选择其他节点"</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">prenode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptOperator">,</span>2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"P-"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">prenode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptOperator">,</span>2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"L-"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sendSysInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统强制添加的节点，不允许删除"</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gridArr</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">TCopyUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GridData</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">index</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SelectedIndex</span>;
                <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">index</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FlowNodeInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">index</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Nextids</span>;
                <span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeItemAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">index</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">setApproveHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridArr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">save</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">arr</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GridData</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">==</span>0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sendSysInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"节点为空不能保存"</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">FlowNodeInstenceService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">saveSubmitCustomFloNode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">source</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addResultListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">onResult</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onResult</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">showInfotoLeftLowerCorner</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"呈报成功"</span><span class="ActionScriptBracket/Brace">)</span>;    
                <span class="ActionScriptDefault_Text">PopUpManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removePopUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">EVENT_APPHIS_EDIT_OK</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">checkSel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SelectedItem</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sendSysInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请选中一条数据"</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span> 
                    <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">true</span>;
                    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getNewMaxNumber</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">arr</span>:<span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">num</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>0;
                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">node</span>:<span class="ActionScriptDefault_Text">FlowNodeInstence</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nodeNumber</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">node</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NodeNumber</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">nodeIt</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getNumberFromRight</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">nodeNumber</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">num</span><span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">nodeIt</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">num</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">nodeIt</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">num</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getNumberFromRight</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">str</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">index</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getNumberLastIndex</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">str</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">index</span><span class="ActionScriptOperator">==</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptReserved">return</span> 0;
                <span class="ActionScriptReserved">else</span>
                    <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">str</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">index</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">str</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">index</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getStringFromRight</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">str</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">index</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getNumberLastIndex</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">str</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">index</span><span class="ActionScriptOperator">==</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptReserved">return</span> <span class="ActionScriptString">""</span>;
                <span class="ActionScriptReserved">else</span>
                    <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">str</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">index</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getNumberLastIndex</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">str</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">len</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">str</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">-</span>1;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">myPattern</span>:<span class="ActionScriptDefault_Text">RegExp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">/\d/</span> ;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">index</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span> -1;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">len</span>;<span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">&gt;=</span>0;<span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">--</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">s</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">str</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">,</span>1<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">result</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">myPattern</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">exec</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">s</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">result</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">==</span><span class="ActionScriptDefault_Text">len</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptDefault_Text">index</span> <span class="ActionScriptOperator">=</span> -1;
                        <span class="ActionScriptReserved">else</span>
                            <span class="ActionScriptDefault_Text">index</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">+</span>1;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">index</span>;
            <span class="ActionScriptBracket/Brace">}</span>
                
        <span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;/fx:Script&gt;</span>
    <span class="MXMLComponent_Tag">&lt;s:Group</span><span class="MXMLDefault_Text"> width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;s:BorderContainer</span><span class="MXMLDefault_Text"> left="</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">" right="</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">" top="</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">" bottom="</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">" cornerRadius="</span><span class="MXMLString">3</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
            <span class="MXMLComponent_Tag">&lt;s:layout&gt;</span>
                <span class="MXMLComponent_Tag">&lt;s:VerticalLayout</span><span class="MXMLDefault_Text"> gap="</span><span class="MXMLString">1</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/s:layout&gt;</span>
            <span class="MXMLComponent_Tag">&lt;s:HGroup</span><span class="MXMLDefault_Text"> width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">25</span><span class="MXMLDefault_Text">" gap="</span><span class="MXMLString">1</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                <span class="MXMLComponent_Tag">&lt;components:IconButton</span><span class="MXMLDefault_Text">  width="</span><span class="MXMLString">80</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">23</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">新增</span><span class="MXMLDefault_Text">"
                                       click="</span><span class="ActionScriptDefault_Text">add</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">" styleName="</span><span class="MXMLString">btnAdd</span><span class="MXMLDefault_Text">" toolTip="</span><span class="MXMLString">新增</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                <span class="MXMLComponent_Tag">&lt;components:IconButton</span><span class="MXMLDefault_Text">  width="</span><span class="MXMLString">80</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">23</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">修改</span><span class="MXMLDefault_Text">"
                                        click="</span><span class="ActionScriptDefault_Text">update</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">" styleName="</span><span class="MXMLString">btnUpdate</span><span class="MXMLDefault_Text">" toolTip="</span><span class="MXMLString">修改</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                <span class="MXMLComponent_Tag">&lt;components:IconButton</span><span class="MXMLDefault_Text">  width="</span><span class="MXMLString">80</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">23</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">删除</span><span class="MXMLDefault_Text">"
                                        click="</span><span class="ActionScriptDefault_Text">del</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">" styleName="</span><span class="MXMLString">btnDel</span><span class="MXMLDefault_Text">" toolTip="</span><span class="MXMLString">删除</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                <span class="MXMLComponent_Tag">&lt;components:IconButton</span><span class="MXMLDefault_Text">  width="</span><span class="MXMLString">80</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">23</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">保存</span><span class="MXMLDefault_Text">"
                                        click="</span><span class="ActionScriptDefault_Text">save</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">" styleName="</span><span class="MXMLString">btnSave</span><span class="MXMLDefault_Text">" toolTip="</span><span class="MXMLString">保存</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/s:HGroup&gt;</span>
            <span class="MXMLComponent_Tag">&lt;s:HGroup</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">hbMain</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" gap="</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                <span class="MXMLComponent_Tag">&lt;s:VGroup</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">btnBox</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">35</span><span class="MXMLDefault_Text">" gap="</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;components:ToggleButtonItemRenderer</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">gridBt</span><span class="MXMLDefault_Text">"
                                                         click="</span><span class="ActionScriptDefault_Text">FlowhistoryGridHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'flowhistoryGridBtClick'</span><span class="ActionScriptBracket/Brace">)</span>;<span class="MXMLDefault_Text">"
                                                         icon="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">gridUp</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" iconDown="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">gridDown</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                                                         iconUp="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">gridUp</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" selected="</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">"
                                                         skinClass="</span><span class="MXMLString">common.components.skins.ToggleButtonItemRendererSkin</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;components:ToggleButtonItemRenderer</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">graphicBt</span><span class="MXMLDefault_Text">"
                                                         click="</span><span class="ActionScriptDefault_Text">FlowhistoryGridHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'flowhistoryGriphicBtClick'</span><span class="ActionScriptBracket/Brace">)</span>;<span class="MXMLDefault_Text">"
                                                         icon="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">graphicUp</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" iconDown="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">graphicDown</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                                                         iconUp="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">graphicUp</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                                                         skinClass="</span><span class="MXMLString">common.components.skins.ToggleButtonItemRendererSkin</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                <span class="MXMLComponent_Tag">&lt;/s:VGroup&gt;</span>
                <span class="MXMLComponent_Tag">&lt;mx:ViewStack</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">viewstack1</span><span class="MXMLDefault_Text">" y="</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" creationPolicy="</span><span class="MXMLString">all</span><span class="MXMLDefault_Text">"
                              horizontalScrollPolicy="</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">" verticalScrollPolicy="</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;datagrid:CustomdataGrid</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">gridMain</span><span class="MXMLDefault_Text">" x="</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">" y="</span><span class="MXMLString">0</span><span class="MXMLDefault_Text">" width="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">"
                                             AutoDataBind="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">" AutoLoad="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                                             initGrid="</span><span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">initGrid</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">}</span><span class="MXMLDefault_Text">" ShowDownGuide="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                                             ShowUpGuide="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/datagrid:CustomdataGrid&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;launch:LaunchDrawCanvas</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">drawCanvas</span><span class="MXMLDefault_Text">" label="</span><span class="MXMLString">图标展示</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>        
                <span class="MXMLComponent_Tag">&lt;/mx:ViewStack&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/s:HGroup&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/s:BorderContainer&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/s:Group&gt;</span>
<span class="MXMLComponent_Tag">&lt;/s:TitleWindow&gt;</span></pre></body>
</html>
