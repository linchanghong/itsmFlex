<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>SubDemandManager.as</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">common</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">AppCore</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">app</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GlobalUtil</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bugManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">code</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BugUtil</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">subDemandManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mxml</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PopSearchSubDemand</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">common</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TAlert</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">display</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DisplayObject</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Event</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MouseEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TimerEvent</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">collections</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArrayCollection</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">controls</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DateField</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">effects</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Fade</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CloseEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlexEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ListEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">formatters</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DateFormatter</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">managers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PopUpManager</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ResultEvent</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">spark</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IndexChangeEvent</span>;

<span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FAppCore</span>:<span class="ActionScriptDefault_Text">GlobalUtil</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">GlobalUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">appCore</span>:<span class="ActionScriptDefault_Text">AppCore</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">AppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getInstance</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptComment">//记录主页表格弹起的是哪个流程的流程状态图
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flow_index</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> -1;
<span class="ActionScriptComment">//一个子需求单对象
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">subDemandObj</span>:<span class="ActionScriptDefault_Text">Object</span>;
<span class="ActionScriptComment">//呈报对象
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">putObj</span>:<span class="ActionScriptDefault_Text">Object</span>;
<span class="ActionScriptComment">//一个请求单对象
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">userApply</span>:<span class="ActionScriptDefault_Text">Object</span>;
<span class="ActionScriptComment">//子需求单的id
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">subDemandID</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
<span class="ActionScriptComment">//自需求但也无存储表格
</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">subDemandTableName</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"T_DEMANDS_PART"</span>;
<span class="ActionScriptComment">//流程模型类型
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">FLOW_TYPE</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"6"</span>;
<span class="ActionScriptComment">//当前系统时间，用于界定用户选择时间
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">now</span>:<span class="ActionScriptDefault_Text">Date</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Date</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptComment">//主页表格数据集
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mainGridArray</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
<span class="ActionScriptComment">//当前系统id：限制需求人员选择--只能选择当前系统的需求人员
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sysID</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> -1;
<span class="ActionScriptComment">////所属系统
</span><span class="ActionScriptComment">//[Bindable]
</span><span class="ActionScriptComment">//public var systems:ArrayCollection;
</span><span class="ActionScriptComment">////所属系统的业务模块
</span><span class="ActionScriptComment">//[Bindable]
</span><span class="ActionScriptComment">//public var modules:ArrayCollection;
</span><span class="ActionScriptComment">//重要程度
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">levels</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;
<span class="ActionScriptComment">//demand作用范围
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">subDemandScops</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;
<span class="ActionScriptComment">//呈报按钮是否有效
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">enablePutBtn</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
<span class="ActionScriptComment">//保存按钮是否有效
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">enableSaveBtn</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
<span class="ActionScriptComment">//判断系统下拉是否被点击,没有就说明其值是subDemand的原始值
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isSystemBeClicked</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
<span class="ActionScriptComment">//表单是否有效 
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">formIsValid</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
<span class="ActionScriptComment">//表单是否为空 
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">formIsEmpty</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>; 
<span class="ActionScriptComment">//排序方式:是否升序
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SORT_FLAG</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
<span class="ActionScriptComment">//是否在查看页面显示"呈报"按钮
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">viewPutBtn</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
<span class="ActionScriptComment">//持有该目前集中控制的对象。 
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">focussedFormControl</span>:<span class="ActionScriptDefault_Text">DisplayObject</span>; 
<span class="ActionScriptComment">//当前登录用户id
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentPersonId</span>:<span class="ActionScriptDefault_Text">String</span>;
<span class="ActionScriptComment">//添加界面的需求单是否选择
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">applyIsSelectedInAdd</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
<span class="ActionScriptComment">//系统
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">systemName</span>:<span class="ActionScriptDefault_Text">String</span>;
<span class="ActionScriptComment">//模块
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">moduleName</span>:<span class="ActionScriptDefault_Text">String</span>;
<span class="ActionScriptComment">//功能测试人员
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">fTesterName</span>:<span class="ActionScriptDefault_Text">String</span>;


<span class="ActionScriptASDoc">/**
 * 弹窗下拉菜单初始化
 */</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">initSubDemandInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">FlexEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptDefault_Text">currentPersonId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserId</span>;
    
    <span class="ActionScriptDefault_Text">AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">OnlyInit</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">//主页表格数据初始化
</span>    <span class="ActionScriptDefault_Text">mainGridArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'initSubDemanHomePageFast'</span><span class="ActionScriptOperator">,</span> []<span class="ActionScriptBracket/Brace">]</span>;
    
<span class="ActionScriptComment">//    //系统
</span><span class="ActionScriptComment">//    if(!(systems != null))
</span><span class="ActionScriptComment">//        BugUtil.handle_server_method("bugManagerAPI","BugManagerAPI","initSupportSystems",
</span><span class="ActionScriptComment">//            [], function(event:ResultEvent):void{
</span><span class="ActionScriptComment">//                systems = BugUtil.getResultObj(event) as ArrayCollection;
</span><span class="ActionScriptComment">//                modules = systems.getItemAt(0).systemModules as ArrayCollection;
</span><span class="ActionScriptComment">//            });
</span>    
    <span class="ActionScriptComment">//重要程度
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">levels</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"initLevels"</span><span class="ActionScriptOperator">,</span>
            []<span class="ActionScriptOperator">,</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">levels</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">//影响范围
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subDemandScops</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"initBugScope"</span><span class="ActionScriptOperator">,</span>
            []<span class="ActionScriptOperator">,</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">subDemandScops</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
    
<span class="ActionScriptBracket/Brace">}</span>













<span class="ActionScriptASDoc">/**将页面值封装到对象里*/</span>
<span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createObject4Save</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">//start==================================================================
</span>    <span class="ActionScriptComment">//对象处理:subDemand模块,subDemand系统,subDemand影响范围,subDemand重要程度
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">module</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">moduleID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sysModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">moduleID</span>;
    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongsBusiness</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">module</span>;
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">system</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">system</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span>;
    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongsSystem</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">system</span>;
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">range</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">demandRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">range</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">demandRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">range</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">range</span>;
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">urgent</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">demandUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">urgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyLevelId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">demandUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyLevelId</span>;
    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urgent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">urgent</span>;
    
    <span class="ActionScriptComment">//服务单填写者--项目经理
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sponsor</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">sponsor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    <span class="ActionScriptDefault_Text">sponsor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">personId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">msPerson</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    <span class="ActionScriptDefault_Text">sponsor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">companyID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">companyId</span>;
    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sponsor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">sponsor</span>;
    
    <span class="ActionScriptComment">//开发经理
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">developManager</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">developManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">developManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>
        :<span class="ActionScriptDefault_Text">demandSelect</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"applyId"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">demandSelect</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">developManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>:<span class="ActionScriptOperator">-</span>1;
    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">developManager</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">developManager</span>;
    
    <span class="ActionScriptComment">//需求人员
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">analyst</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">analyst</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> 
        <span class="ActionScriptDefault_Text">subDemandAnalyst</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"userId"</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">subDemandAnalyst</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userId</span>:<span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">analyst</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">analyst</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">analyst</span>;
    
    <span class="ActionScriptComment">//功能测试人员--需求人员
</span>    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">funcTester</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">analyst</span>;
    
    <span class="ActionScriptComment">//时间处理
</span>    <span class="ActionScriptDefault_Text">applyDateHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">//主题摘要
</span>    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">demandTitle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">demandTitle</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span>;
    <span class="ActionScriptComment">//需求描述
</span>    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">directions</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">directions</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span>;
    
    <span class="ActionScriptComment">//主需求单id
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userApplyId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span>;
    <span class="ActionScriptComment">//状态
</span>    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">demandStatus</span> <span class="ActionScriptOperator">=</span> 0;
    <span class="ActionScriptComment">//是否删除
</span>    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dr</span> <span class="ActionScriptOperator">=</span> 0;
    
    <span class="ActionScriptComment">//子需求单主键id
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span>;
    <span class="ActionScriptComment">//===================================================================end
</span>    
    <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">obj</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**时间处理*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">applyDateHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">apply</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">df</span>:<span class="ActionScriptDefault_Text">DateFormatter</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">DateFormatter</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">df</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">formatString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"YYYY-MM-DD"</span>;
    
    <span class="ActionScriptComment">//子需求发起时间
</span>    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">initDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">df</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">format</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Date</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptComment">//项目经理填写预计需求分析完成时间
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">planAnalysisDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">planAnalysisDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">df</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">format</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">planAnalysisDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptComment">//项目经理填写预计开发完成时间
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">planDevelopDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">planDevelopDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">df</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">format</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">planDevelopDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptComment">//项目经理填写预计单元测试完成时间
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">planUtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">planUtestDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">df</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">format</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">planUtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptComment">//项目经理填写预计功能测试完成时间
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">planFtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">planFtestDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">df</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">format</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">planFtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span><span class="ActionScriptBracket/Brace">)</span>;
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击保存调用到的方法
</span><span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">saveBtn_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">formIsValid</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">formIsEmpty</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"add"</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"addSubDemandUserApply"</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">jsonEncoder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">encode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">createObject4Save</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">saveBtn_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"updateSubDemandUserApply"</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">jsonEncoder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">encode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">createObject4Save</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">saveBtn_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"输入有误,请查看页面提示信息!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//保存请求单的回调函数
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">saveBtn_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">json</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">result</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">JSON</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">parse</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">json</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Object</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">applyIDNow</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"0"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙，请稍后再试！"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"1"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">//呈报按钮激活,保存按钮置灰
</span>            <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"亲，可以呈报哦！"</span>;
            <span class="ActionScriptComment">//保存按钮置灰
</span>            <span class="ActionScriptDefault_Text">enableSaveBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">&gt;=</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptOperator">&gt;</span> 1<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">applyIDNow</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">fileGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">saveDgToDb</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">subDemandTableName</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">fileGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">reSetData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">==</span><span class="ActionScriptOperator">-</span>2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"保存失败！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"系统提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">==</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"后台异常！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"系统提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">==</span>0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请建Model！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"系统提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">//更新主页表格
</span>    <span class="ActionScriptDefault_Text">refreshMainGridAfterAddOrMod</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyIDNow</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptComment">//由于修改页面有呈报按钮,所以呈报后跳转页面
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">enablePutBtn</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"normal"</span>;
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**更新主页表格*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">refreshMainGridAfterAddOrMod</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyIDNow</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flagStr</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"mod"</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"add"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">SORT_FLAG</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">flagStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"add"</span>;
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">curPage</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">totalPage</span> 
                <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">pageCount</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"showSubDemandByID"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">applyIDNow</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">addUserApllyAfterHandle</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">else</span>
                <span class="ActionScriptDefault_Text">mainGridArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'initSubDemanHomePageFast'</span><span class="ActionScriptOperator">,</span> []<span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">flagStr</span><span class="ActionScriptBracket/Brace">]</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span>
            <span class="ActionScriptComment">//更新表格数据
</span>            <span class="ActionScriptDefault_Text">mainGridArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'initSubDemanHomePageFast'</span><span class="ActionScriptOperator">,</span> []<span class="ActionScriptBracket/Brace">]</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"showSubDemandByID"</span><span class="ActionScriptOperator">,</span>
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">subDemandID</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">modUserApllyAfterHandle</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**
 * 如果当前页码为最后一页,并且表格未满,就直接向表格追加用户刚刚插入的数据
 */</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addUserApllyAfterHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addItem</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">totalCount</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">totalCount</span><span class="ActionScriptOperator">+</span>1;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**
 * 将从后台查询到的一条更新请求记录存入主页表格选择的数据位置处
 * 此函数主要是为了减少对数据库的分页查询
 */</span> 
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">modUserApllyAfterHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setItemAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击修改界面的demand来源下拉列表时调用==========重要程度
</span><span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">demandUrgent_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">//先查看levels是否为null，为null再向服务器请求数据
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">levels</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"initLevels"</span><span class="ActionScriptOperator">,</span>
            []<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">demandUrgent_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">demandUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">levels</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptComment">//    //由于界面值有修改,so--将呈报按钮置灰,保存按钮激活
</span><span class="ActionScriptComment">//    enablePutBtn = false;
</span><span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击修改界面的demand来源下拉列表后从后台传入的数据的处理
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">demandUrgent_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">levels</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
    <span class="ActionScriptDefault_Text">demandUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">levels</span>;
<span class="ActionScriptBracket/Brace">}</span>


<span class="ActionScriptComment">//点击修改界面的作用范围下拉列表时调用==========作用范围
</span><span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">demandRange_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">//先查看demandScops是否为null，为null再向服务器请求数据
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subDemandScops</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"initBugScope"</span><span class="ActionScriptOperator">,</span>
            []<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">demandRange_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">demandRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandScops</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptComment">//    //由于界面值有修改,so--将呈报按钮置灰,保存按钮激活
</span><span class="ActionScriptComment">//    enablePutBtn = false;
</span><span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击修改界面的作用范围下拉列表后从后台传入的数据的处理
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">demandRange_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">subDemandScops</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
    <span class="ActionScriptDefault_Text">demandRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandScops</span>;
<span class="ActionScriptBracket/Brace">}</span>


<span class="ActionScriptASDoc">/**添加界面的客户需求单选择改变后*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">demandSelectChange</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">demandSelect</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"applyId"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">sysID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"belongSystem"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span>:<span class="ActionScriptOperator">-</span>1;
        <span class="ActionScriptDefault_Text">systemName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemName</span>:<span class="ActionScriptString">""</span>;
        <span class="ActionScriptDefault_Text">moduleName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sysModule</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sysModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">moduleName</span>:<span class="ActionScriptString">""</span>;
        <span class="ActionScriptDefault_Text">applyIsSelectedInAdd</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptDefault_Text">validateForm</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**验证方法*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">validateForm</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>  
<span class="ActionScriptBracket/Brace">{</span>            
    <span class="ActionScriptComment">//检查验证传递和返回一个布尔值相应。 
</span>    <span class="ActionScriptComment">//保存引用当前集中表单控件 
</span>    <span class="ActionScriptComment">//这样isValid()辅助方法可以只通知 
</span>    <span class="ActionScriptComment">//当前集中形式控制和不影响 
</span>    <span class="ActionScriptComment">//任何其他的表单控件。 
</span>    <span class="ActionScriptDefault_Text">focussedFormControl</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">target</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">DisplayObject</span>;   
    
    <span class="ActionScriptComment">// 标记表单有效的开始 
</span>    <span class="ActionScriptDefault_Text">judgeFormIsValid</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">// 检查表单是否为空 
</span>    <span class="ActionScriptDefault_Text">judgeFormIsEmpty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">//更新功能测试人员显示
</span>    <span class="ActionScriptDefault_Text">fTesterName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandAnalyst</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span>;
    
    <span class="ActionScriptComment">/*运行每个验证器反过来,使用isValid() 
    辅助方法和更新formIsValid的价值 
    因此。 */</span>
    <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">validate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">demandTitleV</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">formIsValid</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">focussedFormControl</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">validate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">directionsV</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">formIsValid</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">focussedFormControl</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">validate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">planAnalysisDateV</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">formIsValid</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">focussedFormControl</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">validate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">planDevelopDateV</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">formIsValid</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">focussedFormControl</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">validate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">planUtestDateV</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">formIsValid</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">focussedFormControl</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">validate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">planFtestDateV</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">formIsValid</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">focussedFormControl</span><span class="ActionScriptBracket/Brace">)</span>;
    
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"add"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flag</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">demandSelect</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"applyId"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">flag</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"请先选择客户需求单!"</span>;
                <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">showMsg</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">formIsEmpty</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">showAndHideLabel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">formIsValid</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span>
                <span class="ActionScriptDefault_Text">showMsg</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span>{}
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">formIsValid</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">formIsEmpty</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">enableSaveBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptDefault_Text">enableSaveBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**“add”与“mod”状态都需要调用*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">showMsg</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">formIsEmpty</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"带“*”项以及“需求描述”为必填项！"</span>;
        <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">formIsValid</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"亲，可以保存!"</span>;
            <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"阶段计划完成时间或需求描述有误！"</span>;
            <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;    
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**闪烁提示方法*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">fade</span>:<span class="ActionScriptDefault_Text">Fade</span>;
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">showAndHideLabel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isshow</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isshow</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">lbBeforeSave</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">=</span>220;
        <span class="ActionScriptDefault_Text">lbBeforeSave</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">fade</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">fade</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Fade</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">fade</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">target</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lbBeforeSave</span>;
            <span class="ActionScriptDefault_Text">fade</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">repeatCount</span><span class="ActionScriptOperator">=</span>0;
            <span class="ActionScriptDefault_Text">fade</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">repeatDelay</span><span class="ActionScriptOperator">=</span>100;
            <span class="ActionScriptDefault_Text">fade</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alphaTo</span><span class="ActionScriptOperator">=</span>0;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptDefault_Text">fade</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">play</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">lbBeforeSave</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">=</span>0;
        <span class="ActionScriptDefault_Text">lbBeforeSave</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">fade</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">fade</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">end</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">fade</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stop</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**判断表单是否为空：任一为空即为空*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">judgeFormIsEmpty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">//判断页面必填字段是否为空
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flag</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">subDemandAnalyst</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"userId"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> 
        <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">subDemandAnalyst</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"id"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">subDemandAnalyst</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptReserved">true</span>: <span class="ActionScriptReserved">false</span> : <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptDefault_Text">formIsEmpty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">||</span> 
        <span class="ActionScriptDefault_Text">demandUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">undefined</span> <span class="ActionScriptOperator">||</span> 
        <span class="ActionScriptDefault_Text">demandRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">undefined</span> <span class="ActionScriptOperator">||</span> 
        <span class="ActionScriptDefault_Text">planAnalysisDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">||</span> 
        <span class="ActionScriptDefault_Text">planDevelopDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">||</span> 
        <span class="ActionScriptDefault_Text">planUtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">||</span> 
        <span class="ActionScriptDefault_Text">planFtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">||</span> 
        <span class="ActionScriptDefault_Text">demandTitle</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">||</span> 
        <span class="ActionScriptDefault_Text">directions</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**判断表单是否有效*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">judgeFormIsValid</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandAnalyst</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flag</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"userId"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"id"</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">subDemandAnalyst</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span> : <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"userId"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">||</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"id"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">formIsValid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">demandUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">undefined</span> <span class="ActionScriptOperator">&amp;&amp;</span> 
        <span class="ActionScriptDefault_Text">demandRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">undefined</span> <span class="ActionScriptOperator">&amp;&amp;</span> 
        <span class="ActionScriptDefault_Text">planAnalysisDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> 
        <span class="ActionScriptDefault_Text">planDevelopDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> 
        <span class="ActionScriptDefault_Text">planUtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> 
        <span class="ActionScriptDefault_Text">planFtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> 
        <span class="ActionScriptDefault_Text">planAnalysisDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">&lt;=</span> <span class="ActionScriptDefault_Text">planDevelopDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">&amp;&amp;</span> 
        <span class="ActionScriptDefault_Text">planDevelopDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">&lt;=</span> <span class="ActionScriptDefault_Text">planUtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">&amp;&amp;</span> 
        <span class="ActionScriptDefault_Text">planUtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">&lt;=</span> <span class="ActionScriptDefault_Text">planFtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">&amp;&amp;</span> 
        <span class="ActionScriptDefault_Text">demandTitle</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">&amp;&amp;</span> 
        <span class="ActionScriptDefault_Text">directions</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">&amp;&amp;</span> 
        <span class="ActionScriptDefault_Text">flag</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">backToHomePage</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">clean</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">enableSaveBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">'normal'</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**清空额界面显示值*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">clean</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">=</span> -1;
    <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
    <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**隐藏流程审批历史表格图*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">hideFlowHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptDefault_Text">AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">includeInLayout</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    
    <span class="ActionScriptDefault_Text">flow_index</span> <span class="ActionScriptOperator">=</span> -1;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**预测用户操作:查看,修改等,隐藏审批历史*/</span>
<span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">hgroup1_mouseOverHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">hideFlowHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**判断是否选择了一条请求单记录*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">isSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">true</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击界面的查看按钮调用
</span><span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">queryBtn_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">/*初始化系统是否被点击状态,这里用于模块下拉菜单加载使用,这里也设置,
    是因为当请求单是"未提交"状态时,是会跳转到修改界面的*/</span>
    <span class="ActionScriptDefault_Text">isSystemBeClicked</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptComment">//判断是否选择数据
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">popUpSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">return</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptDefault_Text">subDemandID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span> : <span class="ActionScriptString">""</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subDemandID</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"showSubDemandByID"</span><span class="ActionScriptOperator">,</span>
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">subDemandID</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptReserved">null</span>;
                <span class="ActionScriptDefault_Text">fTesterName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">funcTester</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userName</span> : <span class="ActionScriptString">''</span>
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
        
        <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"getPersonIdBySubDemandId"</span><span class="ActionScriptOperator">,</span>
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">subDemandID</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">afterGetPersonId4queryHandle</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">afterGetPersonId4queryHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">persons</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">persons</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
            <span class="ActionScriptComment">//是否是需求发起人查看,如果是就可以编辑
</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">currentPersonId</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">//如果说请求单的状态为"未提交"则显示激活"呈报"按钮并且将"保存"按钮置灰
</span>                <span class="ActionScriptDefault_Text">viewPutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">demandStatus</span> <span class="ActionScriptOperator">==</span> 0;
                <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">viewPutBtn</span>;
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">viewPutBtn</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"mod"</span>;
                    <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"亲，可以呈报哦！"</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"query"</span>;
                    <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptBracket/Brace">}</span>    
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">//如果说请求单的状态为"未提交"则显示激活"呈报"按钮并且将"保存"按钮置灰
</span>                <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">viewPutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"query"</span>;
            <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击“修改”按钮触发的事件
</span><span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">modfiyBtn_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">//初始化系统是否被点击状态,这里用于模块下拉菜单加载使用
</span>    <span class="ActionScriptDefault_Text">isSystemBeClicked</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">popUpSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">return</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">item</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span>;
        <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">item</span>;
        <span class="ActionScriptDefault_Text">subDemandID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span>;
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请选择要修改的数据！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">judgeEnableMod</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptReserved">return</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"getPersonIdBySubDemandId"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">subDemandID</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">afterGetPersonId4modHandle</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">afterGetPersonId4modHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">persons</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">persons</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
        <span class="ActionScriptComment">//是否是需求发起人修改,如果是就可以修改
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">currentPersonId</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">//查询出子需求单信息，并跳转到修改页面
</span>            <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"showSubDemandByID"</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">subDemandID</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptReserved">null</span>;
                    
                    <span class="ActionScriptComment">//如果说请求单的状态为"未提交"则显示激活"呈报"按钮并且将"保存"按钮置灰
</span>                    <span class="ActionScriptDefault_Text">viewPutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">demandStatus</span> <span class="ActionScriptOperator">==</span> 0;
                    <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">viewPutBtn</span>;
                    
                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"showDemand4FlowByID"</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">subDemandID</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptReserved">null</span>;
                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"mod"</span>;
            <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"亲，可以呈报哦！"</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请联系项目经理!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**"未提交"状态不能修改*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">judgeEnableMod</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">demandStatus</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"限于\"未提交\"可操作当前功能!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">true</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击首页的添加按钮调用
</span><span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addBtn_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">//判断当前用户是否为“项目经理”
</span>    <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"judgeIsPMByUserId"</span><span class="ActionScriptOperator">,</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">currentPersonId</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">judgeIsPMByUserIdHandle</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">judgeIsPMByUserIdHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"1"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
        <span class="ActionScriptDefault_Text">subDemandID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"add"</span>;
        <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"请先选择客户需求单!"</span>;
        <span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        <span class="ActionScriptDefault_Text">clearFormHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请联系项目经理！"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击demand管理界面首页的删除按钮触发
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">delApplypopWarn</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span>;
        <span class="ActionScriptDefault_Text">subDemandID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span>;
        
        <span class="ActionScriptComment">//判断需求状态
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">judgeEnableMod</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptReserved">return</span>;
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">demandStatus</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"getPersonIdBySubDemandId"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">subDemandID</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">afterGetPersonIdHandle</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"限于“未提交”可删除!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">popUpSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;    
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">afterGetPersonIdHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">persons</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">persons</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
        <span class="ActionScriptComment">//是否是需求发起人修改,如果是就可以修改
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">currentPersonId</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">popWwarn</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">delApplyProcess</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请联系项目经理!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//弹出确认按钮panel
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">popWwarn</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">method</span>:<span class="ActionScriptDefault_Text">Function</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"您确认删除吗？"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"删除"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">OK</span><span class="ActionScriptOperator">|</span><span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NO</span><span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">method</span><span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">YES</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//确认删除请求调用
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">delApplyProcess</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">CloseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">subDemandID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">detail</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">OK</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"delSubDemandById"</span><span class="ActionScriptOperator">,</span>
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">subDemandID</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">afterDelApplyHandle</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptComment">//执行删除后调用
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">afterDelApplyHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">result</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">result</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">result</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"1"</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptComment">//主页表格数据初始化
</span>        <span class="ActionScriptDefault_Text">mainGridArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'initSubDemanHomePageFast'</span><span class="ActionScriptOperator">,</span> []<span class="ActionScriptBracket/Brace">]</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**呈报按钮点击后将*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FISAfterFlowCommit</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">putBtn_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span>;
    <span class="ActionScriptDefault_Text">subDemandID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请选择要呈报的数据！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">judgeEnableMod</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptReserved">return</span>;
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">subDemandID</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"getPersonIdBySubDemandId"</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">subDemandID</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">afterGetPersonId4putHandle</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">afterGetPersonId4putHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">persons</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">persons</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
        <span class="ActionScriptComment">//是否是需求发起人修改,如果是就可以修改
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">currentPersonId</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                
                <span class="ActionScriptComment">//呈报的具体业务处理
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">arr</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span>  <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">Oitem</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"department:"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DeptId</span>;
                <span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Oitem</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">putObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandObj</span>;
                <span class="ActionScriptComment">//if (item.flowState == 138) FISAfterFlowCommit = true;
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sender</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">sender</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">currentPersonId</span>;
                <span class="ActionScriptDefault_Text">sender</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">personName</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserName</span>;
                <span class="ActionScriptComment">//        fAppCore.StartFlowInstence(sender, item.applyEntry.id, FLOW_TYPE, item.applyId, arr, FISAfterFlowCommit, putBtn_clickHandle);
</span>                <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">StartFlowInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sender</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">sender</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">FLOW_TYPE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">subDemandID</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">FISAfterFlowCommit</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">putBtn_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">backToHomePage</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请联系项目经理!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">putBtn_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptComment">//修改数据库请求单的状态
</span>    <span class="ActionScriptComment">//需求状态，0：未提交，1：需求分析，2：开发经理指派人员，3：开发，4：单元测试，5：功能测试，6：项目经理审核，7：完成
</span>    <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">demandStatus</span> <span class="ActionScriptOperator">=</span> 1;
    <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">status</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"需求分析"</span>;
    
    <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"updateSubDemandStatusNoDataBack"</span><span class="ActionScriptOperator">,</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">demandStatus</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">after_putBtn_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">after_putBtn_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">putBtn_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">==</span> 1<span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">=</span> -1;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**
 * 获取兄弟需求服务单们
 */</span>
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">btnBrother_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">item</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span>;
    <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">item</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请选择一条数据！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">mainGridArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'getSubDemandsByUserApplyID'</span><span class="ActionScriptOperator">,</span> 
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userApplyId</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**
 * 查询按钮事件,在此处需要传送一些列数据给弹窗的下拉菜单,以便实现初始化
 */</span> 
<span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">btnSearch_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">popWin</span>:<span class="ActionScriptDefault_Text">PopSearchSubDemand</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">PopSearchSubDemand</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">PopUpManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">createPopUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">PopSearchSubDemand</span><span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">//需求状态，0：未提交，1：需求分析，2：开发经理指派人员，3：开发，4：单元测试，5：功能测试，6：项目经理审核，7：完成
</span>    <span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">statusLst</span> <span class="ActionScriptOperator">=</span> 
        <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">(</span>
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptString">"id"</span>:0<span class="ActionScriptOperator">,</span><span class="ActionScriptString">"describe"</span>:<span class="ActionScriptString">"未提交"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptString">"id"</span>:1<span class="ActionScriptOperator">,</span><span class="ActionScriptString">"describe"</span>:<span class="ActionScriptString">"需求分析"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptString">"id"</span>:2<span class="ActionScriptOperator">,</span><span class="ActionScriptString">"describe"</span>:<span class="ActionScriptString">"开发经理指派人员"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptString">"id"</span>:3<span class="ActionScriptOperator">,</span><span class="ActionScriptString">"describe"</span>:<span class="ActionScriptString">"开发"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptString">"id"</span>:4<span class="ActionScriptOperator">,</span><span class="ActionScriptString">"describe"</span>:<span class="ActionScriptString">"单元测试"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptString">"id"</span>:5<span class="ActionScriptOperator">,</span><span class="ActionScriptString">"describe"</span>:<span class="ActionScriptString">"功能测试"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptString">"id"</span>:6<span class="ActionScriptOperator">,</span><span class="ActionScriptString">"describe"</span>:<span class="ActionScriptString">"项目经理审核"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptString">"id"</span>:7<span class="ActionScriptOperator">,</span><span class="ActionScriptString">"describe"</span>:<span class="ActionScriptString">"完成"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ranges</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandScops</span>;
    <span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">degrees</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">levels</span>;
<span class="ActionScriptComment">//    popWin.systems = systems;
</span>    
    <span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mainApp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span>;
    
    <span class="ActionScriptDefault_Text">PopUpManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">centerPopUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptBracket/Brace">)</span>;
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**刷新点击后,初始化主页表格*/</span>
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">refreshBtn_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">//主页表格数据初始化
</span>    <span class="ActionScriptDefault_Text">mainGridArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">"demandManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"DemandManagerAPI"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'initSubDemanHomePageFast'</span><span class="ActionScriptOperator">,</span> []<span class="ActionScriptBracket/Brace">]</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/** 
 *  清除验证信息 重置功能 
 * */</span> 
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">clearFormHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> 
<span class="ActionScriptBracket/Brace">{</span> 
    <span class="ActionScriptComment">//表单字段清空
</span>    <span class="ActionScriptComment">//判断页面必填字段是否为空
</span>    <span class="ActionScriptDefault_Text">subDemandAnalyst</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">subDemandAnalyst</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
    <span class="ActionScriptDefault_Text">demandUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">undefined</span>;
    <span class="ActionScriptDefault_Text">demandRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">undefined</span>;
    <span class="ActionScriptDefault_Text">planAnalysisDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
    <span class="ActionScriptDefault_Text">planDevelopDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
    <span class="ActionScriptDefault_Text">planUtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
    <span class="ActionScriptDefault_Text">planFtestDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
    <span class="ActionScriptDefault_Text">demandTitle</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
    <span class="ActionScriptDefault_Text">directions</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
    <span class="ActionScriptComment">// 标记为清空 
</span>    <span class="ActionScriptDefault_Text">formIsEmpty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>; 
<span class="ActionScriptBracket/Brace">}</span> 

<span class="ActionScriptASDoc">/**项选中事件:弹出或隐藏审批历史*/</span>
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">mainGrid_itemClickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ListEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span>;
    <span class="ActionScriptDefault_Text">subDemandID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span> : <span class="ActionScriptString">""</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flow_index</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptOperator">-</span>1
        <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">demandStatus</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptDefault_Text">flow_index</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span>;
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptComment">// &amp;&amp; obj.flowId!=null
</span>            <span class="ActionScriptDefault_Text">AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getApproveHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FLOW_TYPE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptDefault_Text">AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        <span class="ActionScriptDefault_Text">AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">includeInLayout</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptDefault_Text">hideFlowHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">demandStatus</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">=</span> -1;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span></pre></body>
</html>
