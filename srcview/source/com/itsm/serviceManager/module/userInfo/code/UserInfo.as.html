<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>UserInfo.as</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">adobe</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serializers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">json</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">JSONDecoder</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">adobe</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serializers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">json</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">JSONEncoder</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">common</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">AppCore</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">app</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GlobalUtil</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flow</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">app</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BugGlobalUtil</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bugManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">code</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BugUtil</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bugManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mxml</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PopSearchUserApply</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bugManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ConstDetailVO</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bugManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MsUserVO</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bugManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ReplyLevelVO</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bugManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SupportSystemVO</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bugManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SystemModuleVO</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bugManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vo</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserApplyVO</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itsm</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">problemManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mxml</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PopProblemSearchUserApply</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">common</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TAlert</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">display</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DisplayObject</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Event</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MouseEvent</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">collections</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArrayCollection</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">containers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FormItem</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">containers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TabNavigator</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">controls</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Alert</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">controls</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DateField</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">controls</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataGridClasses</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DataGridColumn</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CalendarLayoutChangeEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CloseEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlexEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ListEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ValidationResultEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">formatters</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DateFormatter</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">managers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PopUpManager</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ResultEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArrayUtil</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">StringUtil</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">validators</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Validator</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hamcrest</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mxml</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">object</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Null</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">spark</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">components</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Button</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">spark</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">components</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">List</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">spark</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">components</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NavigatorContent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">spark</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">components</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">TabBar</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">spark</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GridSelectionEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">spark</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IndexChangeEvent</span>;


<span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">appCore</span>:<span class="ActionScriptDefault_Text">AppCore</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">AppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getInstance</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;

<span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FAppCore</span>:<span class="ActionScriptDefault_Text">GlobalUtil</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">GlobalUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;

<span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">now</span>:<span class="ActionScriptDefault_Text">Date</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Date</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;

<span class="ActionScriptComment">//用户所选择的系统id
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">systemID</span>:<span class="ActionScriptDefault_Text">uint</span>;

<span class="ActionScriptComment">//一个请求单对象
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">userApply</span>:<span class="ActionScriptDefault_Text">Object</span>;

<span class="ActionScriptComment">//一个需求单请求对象
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">userApplyObj</span>:<span class="ActionScriptDefault_Text">Object</span>;

<span class="ActionScriptComment">//一个子需求单对象
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">subDemandObj</span>:<span class="ActionScriptDefault_Text">Object</span>;

<span class="ActionScriptComment">//子需求单集合
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">subDemandsArray</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;

<span class="ActionScriptComment">//子需求单的id
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">subDemandID</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;

<span class="ActionScriptComment">//流程模型类型
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">US_FLOW_TYPE</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"6"</span>;

<span class="ActionScriptComment">//请求的id
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">userApplyID</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;

<span class="ActionScriptComment">//文档上传所对应的业务表单ID
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">applyID4Word</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;

<span class="ActionScriptComment">//请求单所在数据库表名
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">applyTableName</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"T_USER_APPLY"</span>;

<span class="ActionScriptComment">//需要构建的code
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">codeStr</span>:<span class="ActionScriptDefault_Text">String</span>;

<span class="ActionScriptComment">//选中树数据
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">selectUnit</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>; 

<span class="ActionScriptComment">//给dropDownList传数据
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">list</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;    

<span class="ActionScriptComment">//bug来源
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bugSources</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;

<span class="ActionScriptComment">//bug作用范围
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bugScops</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;

<span class="ActionScriptComment">//所属系统
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">systems</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;

<span class="ActionScriptComment">//所属系统的业务模块
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">modules</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;

<span class="ActionScriptComment">//实际作用范围
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">realBugScops</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;

<span class="ActionScriptComment">//重要程度
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">levels</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;

<span class="ActionScriptComment">//主页表格数据集
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mainGridArray</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;

<span class="ActionScriptComment">//brother表格数据集
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">b_mainGridArray</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;

<span class="ActionScriptComment">//弹窗选择人员后,单位存储
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">company</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;

<span class="ActionScriptComment">//弹窗选择人员后,部门存储
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dept</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;

<span class="ActionScriptComment">//当前在编辑对象
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">apply</span>:<span class="ActionScriptDefault_Text">UserApplyVO</span>;

<span class="ActionScriptComment">//选择的报告人对象
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">selectUser</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;

<span class="ActionScriptComment">//选择的系统对象
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">selectSys</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;

<span class="ActionScriptComment">//报告时间
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">reportTime</span>:<span class="ActionScriptDefault_Text">Date</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Date</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;

<span class="ActionScriptComment">//1:代表查询problem 2：代表查询bug
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FLAG</span>:<span class="ActionScriptDefault_Text">int</span>;
<span class="ActionScriptComment">//流程模型类型
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FLOW_TYPE</span>:<span class="ActionScriptDefault_Text">String</span>;

<span class="ActionScriptComment">//呈报对象
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">putObj</span>:<span class="ActionScriptDefault_Text">Object</span>;

<span class="ActionScriptComment">//记录主页表格弹起的是哪个流程的流程状态图
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flow_index</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> -1;

<span class="ActionScriptComment">//排序方式:是否升序
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">SORT_FLAG</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;

<span class="ActionScriptComment">//呈报时判断
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FISAfterFlowCommit</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;

<span class="ActionScriptComment">//是否在查看页面显示"呈报"按钮
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">viewPutBtn</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;

<span class="ActionScriptComment">//呈报按钮是否有效
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">enablePutBtn</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;

<span class="ActionScriptComment">//持有该目前集中控制的对象。 
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">focussedFormControl</span>:<span class="ActionScriptDefault_Text">DisplayObject</span>;

<span class="ActionScriptComment">//表单是否有效 
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">formIsValid</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;

<span class="ActionScriptComment">//表单是否为空 
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">formIsEmpty</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>; 

<span class="ActionScriptComment">//判断系统下拉是否被点击,没有就说明其值是userApply的原始值
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isSystemBeClicked</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;

<span class="ActionScriptComment">//验证各个控件的信息
</span><span class="ActionScriptComment">//[Bindable]
</span><span class="ActionScriptComment">//private var validatorArr:Array;
</span>

<span class="ActionScriptComment">//===============公共调用方法=============开始==========
</span><span class="ActionScriptComment">//增加里面的两种状态的选择
</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">arrayType</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptString">"问题请求"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptString">"BUG请求"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptString">"需求"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptComment">//请选择请求类型
</span><span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">selectType_changeHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">IndexChangeEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">// TODO Auto-generated method stub
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">selectType</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span><span class="ActionScriptOperator">==</span>0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"problem"</span>;
        <span class="ActionScriptDefault_Text">removeInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">selectType</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span><span class="ActionScriptOperator">==</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"bug"</span>;
        <span class="ActionScriptDefault_Text">removeInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">selectType</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span><span class="ActionScriptOperator">==</span>2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"demand"</span>;
        <span class="ActionScriptDefault_Text">removeInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//将远程服务器返回的数据进行处理
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">resultStr</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">result</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;    
    
    <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"远程服务器返回的数据为："</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">resultStr</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">JSONDecoder</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">decode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">resultStr</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//弹出提示选择记录的信息框
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">popUpSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请选择一条记录！"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//判断是否选择了一条请求单记录
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">isSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">true</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//公共方法，用于调用服务器端相应的方法处理
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span>
    <span class="ActionScriptDefault_Text">componentName</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">className</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">methodName</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">arguments</span>:<span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">handleName</span>:<span class="ActionScriptDefault_Text">Function</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptDefault_Text">appCore</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">AppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getInstance</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataDeal</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataRemote</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">componentName</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">className</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">methodName</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">arguments</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataDeal</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">remoteMethods</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">RESULT</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">handleName</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//===============公共调用方法==============结束=========
</span>
<span class="ActionScriptASDoc">/**
 * 初始化
 * 
 * 主菜单
 */</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">initPopSearchUserApply</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptDefault_Text">AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">gridMain</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">OnlyInit</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">appCore</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">AppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getInstance</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">//主页表格数据初始化
</span>    <span class="ActionScriptDefault_Text">mainGridArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">'bugManagerAPI'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'BugManagerAPI'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'uServiceHomePageFast'</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span>;
    
    <span class="ActionScriptComment">//系统
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">systems</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"initSupportSystems"</span><span class="ActionScriptOperator">,</span>
            []<span class="ActionScriptOperator">,</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">systems</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">//重要程度
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">levels</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"initLevels"</span><span class="ActionScriptOperator">,</span>
            []<span class="ActionScriptOperator">,</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">levels</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">//影响范围
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bugScops</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"initBugScope"</span><span class="ActionScriptOperator">,</span>
            []<span class="ActionScriptOperator">,</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">bugScops</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//格式化查看,新增界面的时间
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentDate</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dateStr</span>:<span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptDefault_Text">dateStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">myTrim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentDate</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">dateStr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"-"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&lt;</span> 3<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">root</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">StringUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">trim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">dateStr</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">" "</span><span class="ActionScriptBracket/Brace">)</span>;
        
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">year</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">root</span><span class="ActionScriptBracket/Brace">[</span>2<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">month</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">root</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"月"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptDefault_Text">month</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">changeToArabicNum</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">month</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">day</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">root</span><span class="ActionScriptBracket/Brace">[</span>1<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">day</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&lt;</span> 10<span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">day</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">day</span>;
        <span class="ActionScriptDefault_Text">dateStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">year</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"-"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">month</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"-"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">day</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">dateStr</span>;
<span class="ActionScriptBracket/Brace">}</span>


<span class="ActionScriptComment">//格式化日期
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">changeToArabicNum</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">month</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tmpStr</span>:<span class="ActionScriptDefault_Text">String</span>;
    
    <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">month</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"一"</span>:
            <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"01"</span>;
            <span class="ActionScriptReserved">break</span>;
        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"二"</span>:
            <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"02"</span>;
            <span class="ActionScriptReserved">break</span>;
        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"三"</span>:
            <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"03"</span>;
            <span class="ActionScriptReserved">break</span>;
        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"四"</span>:
            <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"04"</span>;
            <span class="ActionScriptReserved">break</span>;
        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"五"</span>:
            <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"05"</span>;
            <span class="ActionScriptReserved">break</span>;
        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"六"</span>:
            <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"06"</span>;
            <span class="ActionScriptReserved">break</span>;
        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"七"</span>:
            <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"07"</span>;
            <span class="ActionScriptReserved">break</span>;
        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"八"</span>:
            <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"08"</span>;
            <span class="ActionScriptReserved">break</span>;
        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"九"</span>:
            <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"09"</span>;
            <span class="ActionScriptReserved">break</span>;
        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"十"</span>:
            <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"10"</span>;
            <span class="ActionScriptReserved">break</span>;
        <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"十一"</span>:
            <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"11"</span>;
            <span class="ActionScriptReserved">break</span>;
        <span class="ActionScriptReserved">default</span>:
            <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"12"</span>;
            <span class="ActionScriptReserved">break</span>;
        
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">tmpStr</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//格式化主页表格日期字段方法。myDateF是一个DateFormatter。
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">formatDateTime</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">column</span>:<span class="ActionScriptDefault_Text">DataGridColumn</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptComment">//TAlert.show(item.userApplyCode as String);
</span>    
    <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">flag</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dateStr</span>:<span class="ActionScriptDefault_Text">String</span>;
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">dateStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">myTrim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStartDate</span><span class="ActionScriptBracket/Brace">)</span>;                
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">==</span> 1<span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">dateStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">myTrim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyEndDate</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">==</span> 2<span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">dateStr</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">myTrim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyTime</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">==</span> 3<span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">dateStr</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">myTrim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">planFinishTime</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">==</span> 4<span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">dateStr</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">myTrim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">planFinishTime</span><span class="ActionScriptBracket/Brace">)</span>;
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">dateStr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">match</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">/\d{4}-\d{2}-\d{2}/</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">root</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">StringUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">trim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">dateStr</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">" "</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">year</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">root</span><span class="ActionScriptBracket/Brace">[</span>2<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">month</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">root</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"月"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">month</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">changeToArabicNum</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">month</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">day</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">root</span><span class="ActionScriptBracket/Brace">[</span>1<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">day</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&lt;</span> 10<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">day</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">day</span>;
            <span class="ActionScriptDefault_Text">dateStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">year</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"-"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">month</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"-"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">day</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">dateStr</span>;
        
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">column</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataField</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"applyStartDate"</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">,</span> 0<span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">column</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataField</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"applyEndDate"</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">,</span> 1<span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">column</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataField</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"replyTime"</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">,</span> 2<span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">column</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataField</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"planFinishTime"</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">,</span> 3<span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">else</span> <span class="ActionScriptComment">//planFinishTime
</span>        <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">,</span> 4<span class="ActionScriptBracket/Brace">)</span>;
    
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//这里主要是因为dropDownList的dataProvider需要的是IList接口对象
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getArrayListFromObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>


<span class="ActionScriptASDoc">/**验证方法*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">validateForm</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>  
<span class="ActionScriptBracket/Brace">{</span>                     
    <span class="ActionScriptComment">//由于界面值有修改,so--将呈报按钮置灰,保存按钮激活
</span>    <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptComment">//检查验证传递和返回一个布尔值相应。 
</span>    <span class="ActionScriptComment">//保存引用当前集中表单控件 
</span>    <span class="ActionScriptComment">//这样isValid()辅助方法可以只通知 
</span>    <span class="ActionScriptComment">//当前集中形式控制和不影响 
</span>    <span class="ActionScriptComment">//任何其他的表单控件。 
</span>    <span class="ActionScriptDefault_Text">focussedFormControl</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">target</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">DisplayObject</span>;   
    
    <span class="ActionScriptComment">// 检查表单是否为空 
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"problem"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"bug"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">// 标记表单有效的开始 
</span>        <span class="ActionScriptDefault_Text">formIsValid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">applyEndDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">&gt;=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Date</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        
        <span class="ActionScriptDefault_Text">formIsEmpty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">telephoneInput</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">||</span>
            <span class="ActionScriptDefault_Text">applyEndDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">||</span>
            <span class="ActionScriptDefault_Text">applyTitleInput</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">||</span>
            <span class="ActionScriptDefault_Text">directionsArea</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span>; 
        
        <span class="ActionScriptComment">//运行每个验证器反过来,使用isValid() 
</span>        <span class="ActionScriptComment">//辅助方法和更新formIsValid的价值 
</span>        <span class="ActionScriptComment">//因此。 
</span>        <span class="ActionScriptDefault_Text">validateV</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">telephoneInputV</span><span class="ActionScriptBracket/Brace">)</span>; 
        <span class="ActionScriptDefault_Text">validateV</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyEndDateV</span><span class="ActionScriptBracket/Brace">)</span>; 
        <span class="ActionScriptDefault_Text">validateV</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyTitleInputV</span><span class="ActionScriptBracket/Brace">)</span>; 
        <span class="ActionScriptDefault_Text">validateV</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">directionsAreaV</span><span class="ActionScriptBracket/Brace">)</span>; 
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">df</span>:<span class="ActionScriptDefault_Text">DateFormatter</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">DateFormatter</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptDefault_Text">df</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">formatString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"YYYY-MM-DD"</span>;
        <span class="ActionScriptComment">// 标记表单有效的开始 
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyEndDateQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">formIsValid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">applyEndDateQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">&gt;=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Date</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;    
        <span class="ActionScriptBracket/Brace">}</span>
        
            
        <span class="ActionScriptDefault_Text">formIsEmpty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">telephoneInputQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">||</span>
            <span class="ActionScriptDefault_Text">applyTitleInputQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">||</span>
            <span class="ActionScriptDefault_Text">directionsAreaQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span>; 
        
        <span class="ActionScriptComment">//运行每个验证器反过来,使用isValid() 
</span>        <span class="ActionScriptComment">//辅助方法和更新formIsValid的价值 
</span>        <span class="ActionScriptComment">//因此。 
</span>        <span class="ActionScriptDefault_Text">validateV</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyEndDateQV</span><span class="ActionScriptBracket/Brace">)</span>; 
        <span class="ActionScriptDefault_Text">validateV</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyTitleInputQV</span><span class="ActionScriptBracket/Brace">)</span>; 
        <span class="ActionScriptDefault_Text">validateV</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">directionsAreaQV</span><span class="ActionScriptBracket/Brace">)</span>; 
    <span class="ActionScriptBracket/Brace">}</span>
    
    
<span class="ActionScriptBracket/Brace">}</span> 

<span class="ActionScriptASDoc">/** 
 * 验证方法 
 * */</span> 
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">validateV</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">validator</span>:<span class="ActionScriptDefault_Text">Validator</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span> 
<span class="ActionScriptBracket/Brace">{</span>                 
    <span class="ActionScriptComment">//得到验证对象 
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">validatorSource</span>:<span class="ActionScriptDefault_Text">DisplayObject</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">validator</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">source</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">DisplayObject</span>; 
    
    <span class="ActionScriptComment">//镇压事件如果当前控制被验证的不是 
</span>    <span class="ActionScriptComment">//当前集中控制的形式。这阻止了用户 
</span>    <span class="ActionScriptComment">//从接收视觉验证提示在其他表单控件。 
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">suppressEvents</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">validatorSource</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">focussedFormControl</span><span class="ActionScriptBracket/Brace">)</span>; 
    
    <span class="ActionScriptComment">//执行验证。返回一个ValidationResultEvent。 
</span>    <span class="ActionScriptComment">//传递null作为第一个参数使验证器 
</span>    <span class="ActionScriptComment">//使用属性中定义的属性的标记 
</span>    <span class="ActionScriptComment">// &lt; mx:Validator &gt;标记。 
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ValidationResultEvent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">validator</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">validate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">suppressEvents</span><span class="ActionScriptBracket/Brace">)</span>;  
    
    <span class="ActionScriptComment">//检查验证传递和返回一个布尔值。 
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentControlIsValid</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">ValidationResultEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">VALID</span><span class="ActionScriptBracket/Brace">)</span>; 
    
    <span class="ActionScriptComment">// 修改验证标记 
</span>    <span class="ActionScriptDefault_Text">formIsValid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">formIsValid</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">currentControlIsValid</span>; 
    
    <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">currentControlIsValid</span>; 
<span class="ActionScriptBracket/Brace">}</span> 

<span class="ActionScriptASDoc">/**验证用户输入数据*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">validate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptComment">//定义一个返回错误信息的集合
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">msg</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flag</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0;
    
    <span class="ActionScriptComment">/*var info1:String = BugUtil.compareDate(applyStartDate.text, applyEndDate.text);
    if(info1 != "1"){
        formIsValid=false;
        if(info1 == "0")
            msg += "报告时间晚于期望解决时间!\n";
        else
            msg += info1;
    }else
        flag++;*/</span>
    
    <span class="ActionScriptDefault_Text">judgeFormIsEmpty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">formIsEmpty</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">Alert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"还有值域为空！"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"警告"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptDefault_Text">formIsValid</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">==</span> 1<span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">formIsValid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">formIsValid</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">msg</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">"请注意页面警告信息!"</span>;
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">msg</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"警告"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">//        Alert.show("验证成功！","信息");
</span>        <span class="ActionScriptComment">//        return true;
</span>    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">formIsEmpty</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">formIsValid</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">true</span>;
    <span class="ActionScriptReserved">else</span>
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">false</span>;
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**判断是否有空字段*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">judgeFormIsEmpty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">// 检查表单是否为空
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"problem"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"bug"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">formIsEmpty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">telephoneInput</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">||</span>
            <span class="ActionScriptDefault_Text">applyEndDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">||</span>
            <span class="ActionScriptDefault_Text">applyTitleInput</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">||</span>
            <span class="ActionScriptDefault_Text">directionsArea</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span>; 
    <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">formIsEmpty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">telephoneInputQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">||</span>
            <span class="ActionScriptDefault_Text">applyTitleInputQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span> <span class="ActionScriptOperator">||</span>
            <span class="ActionScriptDefault_Text">directionsAreaQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span>; 
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptASDoc">/**
 * 验证添加按钮内的控件
 * 
 * */</span>
<span class="ActionScriptComment">/*private function validate():Boolean{
    
    //定义一个返回错误信息的集合
    var results:String="";    
    var flag:Boolean=true;
    
    
    //初始化需要验证的控件ID
    validatorArr = new Array();
    
    validatorArr.push(sponsorInput_id);
    validatorArr.push(companyInput_id);
    validatorArr.push(departmentInput_id);
    validatorArr.push(telephoneInput_id);
    
    if(this.currentState=="problem"){
        //初始化问题模块各个属性的验证
        validatorArr.push(applyEndDateP_id);
        
        validatorArr.push(bugSourceP_id);
        validatorArr.push(bugUrgentP_id);
        validatorArr.push(bugRangeP_id);
        validatorArr.push(bugSystemP_id);    
        validatorArr.push(bugModuleP_id);
        
        validatorArr.push(applyTitleInputP_id);    
        validatorArr.push(directionsAreaP_id);
        
        if(applyEndDateP.text&lt;DateField.dateToString(reportTime,"YYYY-MM-DD")){
            results+="期望解决的时间不能小于当前时间！\n";
            flag=false;
        }
    }
    
    if(this.currentState=="bug"){
        //初始化bug模块各个属性的验证
        validatorArr.push(applyEndDate_id);
        
        validatorArr.push(bugSource_id);
        validatorArr.push(bugUrgent_id);
        validatorArr.push(bugRange_id);
        validatorArr.push(bugSystem_id);    
        validatorArr.push(bugModule_id);
        
        validatorArr.push(applyTitleInput_id);    
        validatorArr.push(directionsArea_id);
        
        if(applyEndDate.text&lt;DateField.dateToString(reportTime,"YYYY-MM-DD")){
            results+="期望解决的时间不能小于当前时间！\n";
            flag=false;
        }
    }
    
    
    //开始验证
    var validatorErrorArray:Array = Validator.validateAll(validatorArr);
    var isValidForm:Boolean = validatorErrorArray.length == 0;
    
    if(!sponsorInput.selectObj.hasOwnProperty("userId")&amp;&amp;""==sponsorInput.sText){
        results+="报告人未选择！\n";
        flag=false;
    }
    
    if(!isValidForm){
        Alert.show("还有值域为空！","警告");
        return false;
    }else if(!flag){
        Alert.show(results,"警告");
        return false;
    }else {
        //Alert.show("验证成功！","信息");
        return true;
    }
    return false;
    
}*/</span>

<span class="ActionScriptComment">//重置下拉列表的项目以便其能够正常显示所选userApply中的对应值
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">removeInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"problem"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"bug"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptComment">//重置bug模块的各个属性
</span>        <span class="ActionScriptComment">//重要程度
</span>        <span class="ActionScriptDefault_Text">bugUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">=</span> -1;
        <span class="ActionScriptComment">//影响范围
</span>        <span class="ActionScriptDefault_Text">bugRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">=</span> -1;
        <span class="ActionScriptComment">//所属系统
</span><span class="ActionScriptComment">//        bugSystem.selectedIndex = -1;
</span>        <span class="ActionScriptComment">//所属业务模块
</span><span class="ActionScriptComment">//        bugModule.selectedIndex = -1;
</span>        
        <span class="ActionScriptComment">//期望解决时间
</span>        <span class="ActionScriptDefault_Text">applyEndDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
        <span class="ActionScriptComment">//主题摘要
</span>        <span class="ActionScriptDefault_Text">applyTitleInput</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;    
        <span class="ActionScriptComment">//bug描述
</span>        <span class="ActionScriptDefault_Text">directionsArea</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
        <span class="ActionScriptComment">//所属系统
</span>        <span class="ActionScriptDefault_Text">bugSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
        <span class="ActionScriptComment">//所属业务模块
</span>        <span class="ActionScriptDefault_Text">bugModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;        
        <span class="ActionScriptComment">//清除bug模块的验证的提示信息
</span>        <span class="ActionScriptDefault_Text">applyEndDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
        
        <span class="ActionScriptDefault_Text">bugUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
        <span class="ActionScriptDefault_Text">bugRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
        <span class="ActionScriptDefault_Text">bugSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
        <span class="ActionScriptDefault_Text">bugModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
        
        <span class="ActionScriptComment">//期望解决时间
</span>        <span class="ActionScriptDefault_Text">applyEndDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
        <span class="ActionScriptComment">//主题摘要
</span>        <span class="ActionScriptDefault_Text">applyTitleInput</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
        <span class="ActionScriptComment">//bug描述
</span>        <span class="ActionScriptDefault_Text">directionsArea</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">reasonArea</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
            
            <span class="ActionScriptDefault_Text">reasonArea</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//================首页各个按钮的事件：查看、修改、新增、删除、呈报、查询、刷新、明细===================
</span>
<span class="ActionScriptASDoc">/**
 * 获取需求服务单明细
 */</span>
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">btnBrother_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">item</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Object</span>;
    <span class="ActionScriptDefault_Text">userApplyObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">item</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请选择一条数据！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApplyObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span> <span class="ActionScriptOperator">!=</span> 3<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"您选择的数据不符合要求,重新选择需求单！"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApplyObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatusStr</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"处理中"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApplyObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">subDemandCount</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"brother"</span>;
                    <span class="ActionScriptDefault_Text">b_mainGridArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'getSubDemandsByApplyID'</span><span class="ActionScriptOperator">,</span> 
                        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">userApplyObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"您选择的需求单还未添加子需求单！"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"仅限于状态为“处理中”的需求单！"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**
 * 查看
 * 
 * */</span>
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">queryBtn_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">/*初始化系统是否被点击状态,这里用于模块下拉菜单加载使用,这里也设置,
    是因为当请求单是"未提交"状态时,是会跳转到修改界面的*/</span>
    <span class="ActionScriptDefault_Text">isSystemBeClicked</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptComment">//判断是否选择数据
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">popUpSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">return</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">item</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span>;
    <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">item</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请选择要修改的数据！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            
            <span class="ActionScriptDefault_Text">userApplyID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span>;
            <span class="ActionScriptDefault_Text">applyID4Word</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApplyID</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"showUserApllyByID"</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">userApplyID</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">!=</span> 0 <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptReserved">null</span>;
                    <span class="ActionScriptDefault_Text">applyID4Word</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">userApplyID</span>;
                    
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"subDemandCount"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">subDemandCount</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">subDemandsArray</span> <span class="ActionScriptOperator">=</span> 
                        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">'bugManagerAPI'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'BugManagerAPI'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'getSubDemandsByUserApplyID'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">userApplyID</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span>;
                    
                    <span class="ActionScriptDefault_Text">company</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">company</span> : <span class="ActionScriptString">''</span>;
                    <span class="ActionScriptDefault_Text">dept</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">department</span> : <span class="ActionScriptString">''</span>;
                    
<span class="ActionScriptComment">//                    company = userApply != null ? userApply.company : '';
</span><span class="ActionScriptComment">//                    dept = userApply != null ? userApply.department : '';
</span>                    
                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"getPersonIdByApplyId"</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">afterGetPersonId4queryHandle</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//查看的回调函数
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">afterGetPersonId4queryHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">persons</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">persons</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">persons</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">//是否是填单人或者报告人查看,如果是就可以编辑
</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserId</span>
                <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserId</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">//如果说请求单的状态为"未提交"则显示激活"呈报"按钮并且将"保存"按钮置灰
</span>                <span class="ActionScriptDefault_Text">viewPutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span> <span class="ActionScriptOperator">==</span> 0;
                <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">viewPutBtn</span>;
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">viewPutBtn</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"mod"</span>;
                <span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span> <span class="ActionScriptOperator">==</span> 3<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"demandquery"</span>;
                    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"query"</span>;    
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                    
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span> <span class="ActionScriptOperator">==</span> 3<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">bugDirBtnQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"需求描述"</span>;
                    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span> <span class="ActionScriptOperator">==</span> 1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">bugDirBtnQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"问题描述"</span>;    
                            <span class="ActionScriptDefault_Text">bugTypeBtn</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"问题类型"</span>;
                            <span class="ActionScriptDefault_Text">bugReasonAna</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"问题原因分析"</span>;
                            <span class="ActionScriptDefault_Text">bugResolvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"问题解决方案"</span>;
                        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span> <span class="ActionScriptOperator">==</span> 2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">bugDirBtnQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"BUG描述"</span>;
                            <span class="ActionScriptDefault_Text">bugTypeBtn</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"bug类型"</span>;
                            <span class="ActionScriptDefault_Text">bugReasonAna</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"bug原因分析"</span>;
                            <span class="ActionScriptDefault_Text">bugResolvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"bug解决方案"</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">//如果说请求单的状态为"未提交"则显示激活"呈报"按钮并且将"保存"按钮置灰
</span>                <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">viewPutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"query"</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>



<span class="ActionScriptASDoc">/**
 * 修改
 * 
 * */</span>
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">modfiyBtn_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptComment">//初始化系统是否被点击状态,这里用于模块下拉菜单加载使用
</span>    <span class="ActionScriptDefault_Text">isSystemBeClicked</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">popUpSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">return</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">item</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span>;
        <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">item</span>;
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请选择要修改的数据！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"getPersonIdByApplyId"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">afterGetPersonId4modHandle</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//未提交"状态不能修改
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">judgeEnableMod</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"限于\"未提交\"可修改!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">true</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//修改的回调函数
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">afterGetPersonId4modHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">persons</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">judgeEnableMod</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptReserved">return</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">persons</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">persons</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserId</span>
                <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserId</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                
                <span class="ActionScriptComment">//修改
</span>                <span class="ActionScriptDefault_Text">userApplyID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span>;
                <span class="ActionScriptDefault_Text">applyID4Word</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApplyID</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"showUserApllyByID"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">userApplyID</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">!=</span> 0 <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptReserved">null</span>;
                        <span class="ActionScriptDefault_Text">applyID4Word</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">userApplyID</span>;
                        
                        <span class="ActionScriptComment">//如果说请求单的状态为"未提交"则显示激活"呈报"按钮并且将"保存"按钮置灰
</span>                        <span class="ActionScriptDefault_Text">viewPutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span> <span class="ActionScriptOperator">==</span> 0;
                        <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">viewPutBtn</span>;
                        
                        <span class="ActionScriptDefault_Text">company</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">company</span> : <span class="ActionScriptString">''</span>;
                        <span class="ActionScriptDefault_Text">dept</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">department</span> : <span class="ActionScriptString">''</span>;
                        
                    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"mod"</span>;
                
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请联系填单人或报告人!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//=====================下拉列表的初始化=======================
</span>
<span class="ActionScriptComment">//点击问题来源下拉列表时调用==========重要程度
</span><span class="ActionScriptComment">//点击bug来源下拉列表时调用==========重要程度
</span><span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">bugUrgent_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">//先查看levels是否为null，为null再向服务器请求数据
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">levels</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"initLevels"</span><span class="ActionScriptOperator">,</span>
            []<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">bugUrgent_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"problem"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"bug"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">bugUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">levels</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">bugUrgentQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">levels</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">//由于界面值有修改,so--将呈报按钮置灰,保存按钮激活
</span>    <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击问题来源下拉列表后从后台传入的数据的处理
</span><span class="ActionScriptComment">//点击bug来源下拉列表后从后台传入的数据的处理
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">bugUrgent_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">levels</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"problem"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"bug"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">bugUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">levels</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">bugUrgentQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">levels</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击问题的作用范围下拉列表时调用==========作用范围
</span><span class="ActionScriptComment">//点击bug的作用范围下拉列表时调用==========作用范围
</span><span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">bugRange_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">//先查看bugScops是否为null，为null再向服务器请求数据
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bugScops</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"initBugScope"</span><span class="ActionScriptOperator">,</span>
            []<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">bugRange_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"problem"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"bug"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">bugRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugScops</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">bugRangeQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugScops</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptComment">//由于界面值有修改,so--将呈报按钮置灰,保存按钮激活
</span>    <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击问题的作用范围下拉列表后从后台传入的数据的处理
</span><span class="ActionScriptComment">//点击bug的作用范围下拉列表后从后台传入的数据的处理
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">bugRange_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">bugScops</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"problem"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"bug"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">bugRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugScops</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">bugRangeQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugScops</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击修改界面的所属模块下拉列表时调用==========所属模块
</span><span class="ActionScriptComment">//protected function bugModule_clickHandler(event:MouseEvent):void
</span><span class="ActionScriptComment">//{
</span><span class="ActionScriptComment">//    var sysid:uint;
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    if(this.currentState=="problem" || this.currentState=="bug" || this.currentState=="demand"){
</span><span class="ActionScriptComment">//        
</span><span class="ActionScriptComment">//        if(userApply == null || isSystemBeClicked){
</span><span class="ActionScriptComment">//            sysid = bugSystem.selectedItem != null 
</span><span class="ActionScriptComment">//                ? bugSystem.selectedItem.systemID : -1;
</span><span class="ActionScriptComment">//        }else
</span><span class="ActionScriptComment">//            sysid = userApply.belongSystem.systemID;
</span><span class="ActionScriptComment">//        if(modules == null || modules.getItemAt(0).systemID != sysid)
</span><span class="ActionScriptComment">//            handle_server_method("bugManagerAPI","BugManagerAPI","initSystemModules",
</span><span class="ActionScriptComment">//                [sysid], bugModule_clickHandle);
</span><span class="ActionScriptComment">//        else
</span><span class="ActionScriptComment">//            bugModule.dataProvider = modules;
</span><span class="ActionScriptComment">//    }
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    if(this.currentState=="mod"){
</span><span class="ActionScriptComment">//        
</span><span class="ActionScriptComment">//        if(userApply == null || isSystemBeClicked){
</span><span class="ActionScriptComment">//            sysid = bugSystemQ.selectedItem != null 
</span><span class="ActionScriptComment">//                ? bugSystemQ.selectedItem.systemID : -1;
</span><span class="ActionScriptComment">//        }else
</span><span class="ActionScriptComment">//            sysid = userApply.belongSystem.systemID;
</span><span class="ActionScriptComment">//        if(modules == null || modules.getItemAt(0).systemID != sysid)
</span><span class="ActionScriptComment">//            handle_server_method("bugManagerAPI","BugManagerAPI","initSystemModules",
</span><span class="ActionScriptComment">//                [sysid], bugModule_clickHandle);
</span><span class="ActionScriptComment">//        else
</span><span class="ActionScriptComment">//            bugModuleQ.dataProvider = modules;
</span><span class="ActionScriptComment">//    }
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    //由于界面值有修改,so--将呈报按钮置灰,保存按钮激活
</span><span class="ActionScriptComment">//    enablePutBtn = false;
</span><span class="ActionScriptComment">//}
</span>
<span class="ActionScriptComment">////点击修改界面的所属模块下拉列表后从后台传入的数据的处理
</span><span class="ActionScriptComment">//private function bugModule_clickHandle(event:ResultEvent):void{
</span><span class="ActionScriptComment">//    var obj:Object = getResultObj(event);
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    modules = obj as ArrayCollection;
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    if(this.currentState=="problem" || this.currentState=="bug" || this.currentState=="demand"){
</span><span class="ActionScriptComment">//        bugModule.dataProvider = modules;
</span><span class="ActionScriptComment">//    }
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    if(this.currentState=="mod"){
</span><span class="ActionScriptComment">//        bugModuleQ.dataProvider = modules;
</span><span class="ActionScriptComment">//    }
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//}
</span>

<span class="ActionScriptComment">//点击问题的所属系统下拉列表时调用==========所属系统
</span><span class="ActionScriptComment">//点击bug的所属系统下拉列表时调用==========所属系统
</span><span class="ActionScriptComment">//protected function bugSystem_clickHandler(event:MouseEvent):void
</span><span class="ActionScriptComment">//{
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    //系统下拉被点击标志
</span><span class="ActionScriptComment">//    isSystemBeClicked = true;
</span><span class="ActionScriptComment">//    //由于界面值有修改,so--将呈报按钮置灰,保存按钮激活
</span><span class="ActionScriptComment">//    enablePutBtn = false;
</span><span class="ActionScriptComment">//    //先查看systems是否为null，为null再向服务器请求数据
</span><span class="ActionScriptComment">//    var sysid:uint;
</span><span class="ActionScriptComment">//    var flag:Boolean;
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    if(systems == null){
</span><span class="ActionScriptComment">//        handle_server_method("bugManagerAPI","BugManagerAPI","initSupportSystems",
</span><span class="ActionScriptComment">//            [], bugSystem_clickHandle);
</span><span class="ActionScriptComment">//    }else if(this.currentState=="problem" || this.currentState=="bug" || this.currentState=="demand"){
</span><span class="ActionScriptComment">//            sysid= bugSystem.selectedItem.systemID;
</span><span class="ActionScriptComment">//            bugSystem.dataProvider = systems;
</span><span class="ActionScriptComment">//            if(bugSystem.selectedIndex == 0){
</span><span class="ActionScriptComment">//            modules = systems.getItemAt(0).systemModules as ArrayCollection;
</span><span class="ActionScriptComment">//            bugModule.dataProvider = modules;
</span><span class="ActionScriptComment">//        }else{
</span><span class="ActionScriptComment">//            flag = false;
</span><span class="ActionScriptComment">//            if(modules != null){
</span><span class="ActionScriptComment">//                if(modules.getItemAt(0).systemID == sysid)
</span><span class="ActionScriptComment">//                    bugModule.dataProvider = modules;
</span><span class="ActionScriptComment">//                else
</span><span class="ActionScriptComment">//                    flag = true;
</span><span class="ActionScriptComment">//            }else
</span><span class="ActionScriptComment">//                flag = true;
</span><span class="ActionScriptComment">//            if(flag)
</span><span class="ActionScriptComment">//                handle_server_method("bugManagerAPI","BugManagerAPI","initSystemModules",
</span><span class="ActionScriptComment">//                    [sysid], bugModule_clickHandle);
</span><span class="ActionScriptComment">//        }
</span><span class="ActionScriptComment">//        
</span><span class="ActionScriptComment">//    }else{
</span><span class="ActionScriptComment">//        sysid = bugSystemQ.selectedItem.systemID;
</span><span class="ActionScriptComment">//        bugSystemQ.dataProvider = systems;
</span><span class="ActionScriptComment">//        if(bugSystemQ.selectedIndex == 0){
</span><span class="ActionScriptComment">//            modules = systems.getItemAt(0).systemModules as ArrayCollection;
</span><span class="ActionScriptComment">//            bugModuleQ.dataProvider = modules;
</span><span class="ActionScriptComment">//        }else{
</span><span class="ActionScriptComment">//            flag= false;
</span><span class="ActionScriptComment">//            if(modules != null){
</span><span class="ActionScriptComment">//                if(modules.getItemAt(0).systemID == sysid)
</span><span class="ActionScriptComment">//                    bugModuleQ.dataProvider = modules;
</span><span class="ActionScriptComment">//                else
</span><span class="ActionScriptComment">//                    flag = true;
</span><span class="ActionScriptComment">//            }else
</span><span class="ActionScriptComment">//                flag = true;
</span><span class="ActionScriptComment">//            if(flag)
</span><span class="ActionScriptComment">//                handle_server_method("bugManagerAPI","BugManagerAPI","initSystemModules",
</span><span class="ActionScriptComment">//                    [sysid], bugModule_clickHandle);
</span><span class="ActionScriptComment">//        }
</span><span class="ActionScriptComment">//    }
</span><span class="ActionScriptComment">//}
</span>
<span class="ActionScriptComment">//点击问题的所属系统下拉列表后从后台传入的数据的处理
</span><span class="ActionScriptComment">//点击bug的所属系统下拉列表后从后台传入的数据的处理
</span><span class="ActionScriptComment">//private function bugSystem_clickHandle(event:ResultEvent):void{
</span><span class="ActionScriptComment">//    systems = getResultObj(event) as ArrayCollection;
</span><span class="ActionScriptComment">//    modules = systems.getItemAt(0) as ArrayCollection;
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    if(this.currentState=="problem" || this.currentState == "bug" || this.currentState=="demand"){
</span><span class="ActionScriptComment">//        bugSystem.dataProvider = systems;
</span><span class="ActionScriptComment">//        bugModule.dataProvider = modules;
</span><span class="ActionScriptComment">//    }
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    if(this.currentState == "mod"){
</span><span class="ActionScriptComment">//        bugSystemQ.dataProvider = systems;
</span><span class="ActionScriptComment">//        bugModuleQ.dataProvider = modules;
</span><span class="ActionScriptComment">//    }
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//}
</span>
<span class="ActionScriptASDoc">/**
 * 新增 
 * 
 * */</span>
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addBtn_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"add"</span>;
    
    
    <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
    <span class="ActionScriptDefault_Text">selectUser</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
    
    <span class="ActionScriptDefault_Text">company</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
    <span class="ActionScriptDefault_Text">dept</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
    <span class="ActionScriptDefault_Text">telephoneInput</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
    <span class="ActionScriptDefault_Text">userApplyID</span> <span class="ActionScriptOperator">=</span> 0;
    <span class="ActionScriptDefault_Text">idFlag</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
    <span class="ActionScriptDefault_Text">applyID4Word</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
    <span class="ActionScriptComment">//清除nomal状态下的验证提示信息
</span>    
    <span class="ActionScriptDefault_Text">telephoneInput</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">""</span>;
    
    <span class="ActionScriptDefault_Text">removeInfo</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">selectType</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span><span class="ActionScriptOperator">=</span>-1;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">list</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"initDropDownList4AddPage"</span><span class="ActionScriptOperator">,</span>
            []<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">addBtn_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//点击首页的新增按钮后，会从数据库中查询出bug来源、bug作用范围、所属系统、所属业务模块、实际作用范围的列表
</span><span class="ActionScriptComment">//该方法的作用就是处理这些数据，并将数据绑定到对应的变量上
</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addBtn_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">//后台传来数据的暂存
</span>    <span class="ActionScriptDefault_Text">list</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
    <span class="ActionScriptComment">//分类存储
</span>    <span class="ActionScriptComment">//来源
</span>    <span class="ActionScriptDefault_Text">bugSources</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">list</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
    <span class="ActionScriptComment">//作用范围
</span>    <span class="ActionScriptDefault_Text">bugScops</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">list</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
    <span class="ActionScriptComment">//系统
</span>    <span class="ActionScriptDefault_Text">systems</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">list</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>3<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
    <span class="ActionScriptComment">//第一个系统的业务模块
</span>    <span class="ActionScriptDefault_Text">modules</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">systems</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemModules</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
    <span class="ActionScriptComment">//实际作用范围
</span>    <span class="ActionScriptDefault_Text">realBugScops</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugScops</span>;
    <span class="ActionScriptComment">//重要程度
</span>    <span class="ActionScriptDefault_Text">levels</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">list</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>2<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
<span class="ActionScriptBracket/Brace">}</span>


<span class="ActionScriptComment">//所属系统更改时调用
</span><span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">bugSystem_changeHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sysID</span>:<span class="ActionScriptDefault_Text">int</span> ;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"problem"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"bug"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">bugModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
        <span class="ActionScriptDefault_Text">bugModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
        <span class="ActionScriptDefault_Text">systemID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"systemID"</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">bugSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span>:<span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bugSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span> 
                <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">bugSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"belongSystem"</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span>:<span class="ActionScriptOperator">-</span>1:<span class="ActionScriptOperator">-</span>1;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">bugModuleQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
        <span class="ActionScriptDefault_Text">bugModuleQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
        <span class="ActionScriptDefault_Text">systemID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugSystemQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"systemID"</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">bugSystemQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span>:<span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bugSystemQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span> 
                <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">bugSystemQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"belongSystem"</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span>:<span class="ActionScriptOperator">-</span>1:<span class="ActionScriptOperator">-</span>1;
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptComment">//    handle_server_method("bugManagerAPI","BugManagerAPI","initSystemModules",
</span><span class="ActionScriptComment">//        [sysID], bugSystem_changeHandle);
</span><span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//private function bugSystem_changeHandle(event:ResultEvent):void{
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    //由于界面值有修改,so--将呈报按钮置灰,保存按钮激活
</span><span class="ActionScriptComment">//    enablePutBtn = false;
</span><span class="ActionScriptComment">//    modules = getResultObj(event) as ArrayCollection;
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    if(this.currentState=="problem" || this.currentState=="bug" || this.currentState=="demand"){
</span><span class="ActionScriptComment">//        bugModule.dataProvider = modules;
</span><span class="ActionScriptComment">//    }
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    if(this.currentState=="mod"){
</span><span class="ActionScriptComment">//        bugModuleQ.dataProvider = modules;
</span><span class="ActionScriptComment">//    }
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//}
</span>

<span class="ActionScriptASDoc">/**
 * 删除
 * 
 * */</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">delApplypopWarn</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">item</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span>;
    <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">item</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatusStr</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"未提交"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"仅限于“未提交”的数据！"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"getPersonIdByApplyId"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">afterGetPersonIdHandle</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">popUpSelect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">afterGetPersonIdHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">persons</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">persons</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">persons</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserId</span>
                <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserId</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">popWwarn</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">delApplyProcess</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请联系填单人或报告人!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//弹出确认按钮panel
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">popWwarn</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">method</span>:<span class="ActionScriptDefault_Text">Function</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"您确认删除吗？"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"删除"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">OK</span><span class="ActionScriptOperator">|</span><span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NO</span><span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">method</span><span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">YES</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//删除请求单调用
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">delApplyProcess</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">CloseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">idFlag</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">detail</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">OK</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"delUserApplyById"</span><span class="ActionScriptOperator">,</span>
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">idFlag</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">afterDelApplyHandle</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//执行删除后调用
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">afterDelApplyHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">appCore</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">AppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getInstance</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">result</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">result</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">result</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"1"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">//                    TAlert.show("服务器处理成功！");
</span>        
        <span class="ActionScriptComment">//更新表格数据
</span>        <span class="ActionScriptDefault_Text">mainGridArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">'bugManagerAPI'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'BugManagerAPI'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'uServiceHomePageFast'</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**
 * 呈报
 * 
 * */</span>

<span class="ActionScriptASDoc">/**呈报按钮点击后将*/</span>
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">putBtn_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">item</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span>;
    <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">item</span>;
    <span class="ActionScriptComment">//处理报告时间
</span>    <span class="ActionScriptComment">//格式化报告时间
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">df</span>:<span class="ActionScriptDefault_Text">DateFormatter</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">DateFormatter</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">df</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">formatString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"YYYY-MM-DD"</span>;
    <span class="ActionScriptComment">//系统生成报告时间--即当天提交的时间
</span>    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStartDate</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">df</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">format</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">reportTime</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"呈报的类型："</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请选择要呈报的数据！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatusStr</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"未提交"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"呈报仅限于“未提交”的数据！"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"getPersonIdByApplyId"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">afterGetPersonId4putHandle</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>    
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">afterGetPersonId4putHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">persons</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"0"</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">persons</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">persons</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserId</span>
                <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">persons</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItemAt</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserId</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                
                <span class="ActionScriptComment">//呈报的具体业务处理
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">arr</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span>  <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">Oitem</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"department:"</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DeptId</span>;
                <span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Oitem</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">putObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span>;
                <span class="ActionScriptComment">//if (item.flowState == 138) FISAfterFlowCommit = true;
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sender</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">sender</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserId</span>;
                <span class="ActionScriptDefault_Text">sender</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">personName</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserName</span>;
                <span class="ActionScriptComment">//        fAppCore.StartFlowInstence(sender, item.applyEntry.id, FLOW_TYPE, item.applyId, arr, FISAfterFlowCommit, putBtn_clickHandle);
</span>                <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">StartFlowInstence</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sender</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">sender</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">arr</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">FISAfterFlowCommit</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">putBtn_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
                
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请联系填单人或报告人!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">putBtn_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptComment">//修改数据库请求单的状态
</span>    <span class="ActionScriptComment">//请求状态：0—未提交，1—未受理，2—处理中，3—完成
</span>    <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span> <span class="ActionScriptOperator">=</span> 1;
    <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatusStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"未受理"</span>;
    
    <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"updateUerApplyStatus"</span><span class="ActionScriptOperator">,</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">after_putBtn_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**
 * 处理呈报对象的时间
 */</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">dateOfPutObjFormat</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">putObj</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptComment">//期望解决时间
</span>    <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyEndDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyEndDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyEndDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span>
        <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyEndDate</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptString">""</span>;
    
    <span class="ActionScriptComment">//请求发起时间
</span>    <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStartDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStartDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStartDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span>
        <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStartDate</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptString">""</span>;
    
    <span class="ActionScriptComment">//计划解决时间
</span>    <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">planFinishTime</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">planFinishTime</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">planFinishTime</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span>
        <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">planFinishTime</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptString">""</span>;
    
    <span class="ActionScriptComment">//响应时间
</span>    <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyTime</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyTime</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyTime</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span>
        <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyTime</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptString">""</span>;
    
    <span class="ActionScriptComment">//实际解决时间
</span>    <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">realFinishTime</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">realFinishTime</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">realFinishTime</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span>
        <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">realFinishTime</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptString">""</span>;
    
    <span class="ActionScriptComment">//所属系统的上线时间
</span>    <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">onlineDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">onlineDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> 
        <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">onlineDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span>
        <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">formateDate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">putObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">onlineDate</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptString">""</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">after_putBtn_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptComment">//更新主页表格
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">!=</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatusStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span> <span class="ActionScriptOperator">==</span>1 <span class="ActionScriptOperator">?</span> <span class="ActionScriptString">"未受理"</span> : <span class="ActionScriptString">"未提交"</span>;
        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setItemAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"normal"</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span>
        <span class="ActionScriptDefault_Text">putBtn_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>



<span class="ActionScriptASDoc">/**
 * 查询
 * 
 * 查询按钮事件,在此处需要传送一些列数据给弹窗的下拉菜单,以便实现初始化
 */</span> 
<span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">btnSearch_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">popWin</span>:<span class="ActionScriptDefault_Text">PopSearchUserApply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">PopSearchUserApply</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">PopUpManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">createPopUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">PopSearchUserApply</span><span class="ActionScriptOperator">,</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">//状态---请求状态：0—未提交，1—未受理，2—处理中，3—完成
</span>    <span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">statusLst</span> <span class="ActionScriptOperator">=</span> 
        <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">(</span>
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptString">"id"</span>:0<span class="ActionScriptOperator">,</span><span class="ActionScriptString">"describe"</span>:<span class="ActionScriptString">"未提交"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptString">"id"</span>:1<span class="ActionScriptOperator">,</span><span class="ActionScriptString">"describe"</span>:<span class="ActionScriptString">"未受理"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptString">"id"</span>:2<span class="ActionScriptOperator">,</span><span class="ActionScriptString">"describe"</span>:<span class="ActionScriptString">"处理中"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptString">"id"</span>:3<span class="ActionScriptOperator">,</span><span class="ActionScriptString">"describe"</span>:<span class="ActionScriptString">"完成"</span><span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ranges</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugScops</span>;
    <span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">degrees</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">levels</span>;
    <span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systems</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">systems</span>;
    <span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    <span class="ActionScriptComment">//popWin.flag = FLAG;
</span>    <span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    
    <span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mainApp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span>;
    
    <span class="ActionScriptDefault_Text">PopUpManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">centerPopUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">popWin</span><span class="ActionScriptBracket/Brace">)</span>;
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**
 * 刷新点击后,初始化主页表格
 * 
 * */</span>
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">refreshBtn_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">appCore</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">AppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getInstance</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptComment">//主页表格数据初始化
</span>    <span class="ActionScriptDefault_Text">mainGridArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">'bugManagerAPI'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'BugManagerAPI'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'uServiceHomePageFast'</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//================首页各个按钮的事件：查看、修改、新增、删除、呈报、查询、刷新===================
</span>
<span class="ActionScriptComment">//========================修改和新增状态下的按钮事件：的保存、取消、呈报=========================
</span><span class="ActionScriptASDoc">/**
 * 
 * 点击修改、新增状态下的保存调用到的方法
 * 
 * */</span>
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">saveBtn_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">validate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"problem"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>        
            <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"addUProblemApply"</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">jsonEncoder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">encode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">storeSimpleValue2userApply</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">saveBtn_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"bug"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"addUBugApply"</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">jsonEncoder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">encode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">storeSimpleValue2userApply</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">saveBtn_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"addUDemandApply"</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">jsonEncoder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">encode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">storeSimpleValue2userApply</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">saveBtn_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">handle_server_method</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"bugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"BugManagerAPI"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"updateBugUerApplyAdd"</span><span class="ActionScriptOperator">,</span>
                <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">jsonEncoder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">encode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">storeSimpleValue2userApply</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">saveBtn_clickHandle</span><span class="ActionScriptBracket/Brace">)</span>;    
        <span class="ActionScriptBracket/Brace">}</span>
        
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//将界面中的用户修改的值存入对象之中
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">storeSimpleValue2userApply</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptComment">//请求单填写者
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">applyEntry</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptComment">//提出请求的具体用户-报告人
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sponsor</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">//存放各个下拉列表的属性
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">urgent</span>:<span class="ActionScriptDefault_Text">ReplyLevelVO</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ReplyLevelVO</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">range</span>:<span class="ActionScriptDefault_Text">ConstDetailVO</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ConstDetailVO</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">system</span>:<span class="ActionScriptDefault_Text">SupportSystemVO</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SupportSystemVO</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">module</span>:<span class="ActionScriptDefault_Text">SystemModuleVO</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SystemModuleVO</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">origin</span>:<span class="ActionScriptDefault_Text">ConstDetailVO</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ConstDetailVO</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptComment">//==========================================
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">//对象处理:问题模块,问题系统,问题影响范围,问题实际影响范围,问题重要程度,请求单状态
</span>        <span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">moduleID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugModuleQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"moduleID"</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">bugModuleQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">moduleID</span>:<span class="ActionScriptDefault_Text">bugModuleQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span>
            <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sysModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">moduleID</span>:<span class="ActionScriptString">"-1"</span>;
        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sysModule</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">module</span>;
        
        <span class="ActionScriptDefault_Text">system</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugSystemQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"systemID"</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">bugSystemQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span>:<span class="ActionScriptDefault_Text">bugSystemQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span>
            <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span>:<span class="ActionScriptOperator">-</span>1;
        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">system</span>;
        
<span class="ActionScriptComment">//        if(bugModuleQ.selectedItem != null)
</span><span class="ActionScriptComment">//            module.moduleID = bugModuleQ.selectedItem.moduleID;
</span><span class="ActionScriptComment">//        obj.sysModule = module;
</span><span class="ActionScriptComment">//        
</span><span class="ActionScriptComment">//        if(bugSystemQ.selectedItem != null)
</span><span class="ActionScriptComment">//            system.systemID = bugSystemQ.selectedItem.systemID;
</span><span class="ActionScriptComment">//        obj.belongSystem = system;
</span>        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bugRangeQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">range</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugRangeQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">range</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">range</span>;
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bugUrgentQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">urgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyLevelId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugUrgentQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyLevelId</span>;
        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urgent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">urgent</span>;
        
        <span class="ActionScriptComment">//问题模块的主题摘要
</span>        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyTitle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">applyTitleInputQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span>;
        <span class="ActionScriptComment">//问题模块的问题描述
</span>        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">directions</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">directionsAreaQ</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">myTrim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">directionsAreaQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptString">""</span>;
        
        <span class="ActionScriptComment">//联系电话
</span>        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">telephone</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">telephoneInputQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span>;
        
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span>;
            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DR</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DR</span>;
            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span>;
            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙,稍后再试!"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">//联系电话
</span>        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">telephone</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">telephoneInputQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span>;
        
        <span class="ActionScriptComment">//请求id
</span>        <span class="ActionScriptDefault_Text">applyEntry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
        <span class="ActionScriptDefault_Text">applyEntry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">personId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">msPerson</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
        <span class="ActionScriptDefault_Text">applyEntry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">companyID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">companyId</span>;
        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyEntry</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">applyEntry</span>;
        
        <span class="ActionScriptComment">//时间处理
</span>        <span class="ActionScriptDefault_Text">applyDateHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span>;
        
        <span class="ActionScriptComment">//公司与部门
</span>        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">company</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DeptName</span>;
<span class="ActionScriptComment">//        obj.department = appCore.loginUser.department;
</span>        
        <span class="ActionScriptComment">//用户请求单编号
</span>        <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userApplyCode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">?</span> 
            <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userApplyCode</span> : <span class="ActionScriptReserved">null</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"problem"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"bug"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"problem"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">FLOW_TYPE</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"1"</span>;    
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"bug"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">FLOW_TYPE</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"2"</span>;
            <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyReason</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">reasonArea</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">myTrim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">reasonArea</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptString">""</span>;
                <span class="ActionScriptDefault_Text">FLOW_TYPE</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"3"</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">//对象处理:bug模块,bug系统,bug影响范围,bug实际影响范围,bug重要程度,请求单状态
</span>            
            <span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">moduleID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"moduleID"</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">bugModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">moduleID</span>:<span class="ActionScriptDefault_Text">bugModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span>
                <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sysModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">moduleID</span>:<span class="ActionScriptString">"-1"</span>;
            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sysModule</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">module</span>;
            
            <span class="ActionScriptDefault_Text">system</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"systemID"</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">bugSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span>:<span class="ActionScriptDefault_Text">bugSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span>
                <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span>:<span class="ActionScriptOperator">-</span>1;
            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">system</span>;
            
<span class="ActionScriptComment">//            if(bugModule.selectedItem != null)
</span><span class="ActionScriptComment">//                module.moduleID = bugModule.selectedItem.moduleID;
</span><span class="ActionScriptComment">//            obj.sysModule = module;
</span><span class="ActionScriptComment">//            
</span><span class="ActionScriptComment">//            
</span><span class="ActionScriptComment">//            if(bugSystem.selectedItem != null)
</span><span class="ActionScriptComment">//                system.systemID = bugSystem.selectedItem.systemID;
</span><span class="ActionScriptComment">//            obj.belongSystem = system;
</span>            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bugRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">range</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">range</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">range</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bugUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">urgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyLevelId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyLevelId</span>;
            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urgent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">urgent</span>;
            
            <span class="ActionScriptComment">//联系电话
</span>            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">telephone</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">telephoneInput</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span>;
            
            <span class="ActionScriptComment">//bug模块的主题摘要
</span>            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyTitle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">applyTitleInput</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span>;
            <span class="ActionScriptComment">//bug模块的问题描述
</span>            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">directions</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">directionsArea</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">myTrim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">directionsArea</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptString">""</span>;
            
            <span class="ActionScriptComment">//时间处理
</span>            <span class="ActionScriptDefault_Text">applyDateHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptComment">//公司与部门
</span>            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">department</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FAppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FCusUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DeptName</span>;
<span class="ActionScriptComment">//            obj.department = userApply != null ? userApply.department : '';
</span>            
            <span class="ActionScriptComment">//用户请求单编号
</span>            <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userApplyCode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">?</span> 
                <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userApplyCode</span> : <span class="ActionScriptReserved">null</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
    <span class="ActionScriptBracket/Brace">}</span>
    
    
    
    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FLOW_TYPE</span>;
    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span> <span class="ActionScriptOperator">=</span> 0;
    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DR</span> <span class="ActionScriptOperator">=</span> 0;
    
    <span class="ActionScriptComment">//请求id
</span>    <span class="ActionScriptDefault_Text">applyEntry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    <span class="ActionScriptDefault_Text">applyEntry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">personId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">msPerson</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    <span class="ActionScriptDefault_Text">applyEntry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">companyID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">companyId</span>;
    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyEntry</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">applyEntry</span>;
    
    <span class="ActionScriptComment">//报告人
</span>    <span class="ActionScriptDefault_Text">sponsor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sponsor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">sponsor</span>;
    
    <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">obj</span>;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">//日期格式处理
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">applyDateHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">apply</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptComment">//格式化报告时间
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">df</span>:<span class="ActionScriptDefault_Text">DateFormatter</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">DateFormatter</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">df</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">formatString</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"YYYY-MM-DD"</span>;
    <span class="ActionScriptComment">//系统生成报告时间--即当天提交的时间
</span><span class="ActionScriptComment">//    apply.applyStartDate=df.format(reportTime);
</span>    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"problem"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"bug"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">//期望解决时间
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyEndDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">applyEndDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyEndDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">df</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">format</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyEndDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyEndDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">StringUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">trim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyEndDate</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">//期望解决时间
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyEndDateQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">applyEndDateQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyEndDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">df</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">format</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyEndDateQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedDate</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyEndDate</span> <span class="ActionScriptOperator">=</span> 
                <span class="ActionScriptDefault_Text">StringUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">trim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyEndDateQ</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span>


<span class="ActionScriptComment">//保存请求单的回调函数
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">saveBtn_clickHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">json</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">result</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">JSON</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">parse</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">json</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Object</span>;
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">applyIDNow</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"0"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"系统繁忙，请稍后再试！"</span><span class="ActionScriptOperator">,</span><span class="ActionScriptString">"温馨提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span>;
        <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"1"</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptComment">//呈报按钮激活,保存按钮置灰
</span>            <span class="ActionScriptDefault_Text">enablePutBtn</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">&gt;=</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptOperator">&gt;</span> 1<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">applyIDNow</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"problem"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"bug"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"demand"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">fileGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">saveDgToDb</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">applyTableName</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">fileGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">reSetData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">==</span><span class="ActionScriptOperator">-</span>2<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"保存失败！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"系统提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">==</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"后台异常！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"系统提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">==</span>0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">TAlert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"请建Model！"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"系统提示"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptComment">//更新主页表格
</span>    <span class="ActionScriptDefault_Text">refreshMainGridAfterAddOrMod</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyIDNow</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptComment">//由于修改页面有呈报按钮,所以呈报后跳转页面
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">enablePutBtn</span><span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"normal"</span>;
<span class="ActionScriptBracket/Brace">}</span>




<span class="ActionScriptASDoc">/**
 * 点击同胞状态下的取消按钮时
 * 
 * */</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">backToHomePage</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"normal"</span>;
    
    <span class="ActionScriptComment">//主页表格数据初始化
</span>    <span class="ActionScriptDefault_Text">mainGridArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">'bugManagerAPI'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'BugManagerAPI'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'uServiceHomePageFast'</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span>;
<span class="ActionScriptBracket/Brace">}</span>


<span class="ActionScriptASDoc">/**更新主页表格*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">refreshMainGridAfterAddOrMod</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">applyIDNow</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    
    
    <span class="ActionScriptComment">//更新表格数据
</span>    <span class="ActionScriptDefault_Text">appCore</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">AppCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getInstance</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">mainGridArray</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">'bugManagerAPI'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'BugManagerAPI'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">'uServiceHomePageFast'</span><span class="ActionScriptOperator">,</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span>;
    
    <span class="ActionScriptComment">/*var flagStr:String = "mod";
    if(this.currentState == "add"){
        if(SORT_FLAG){
            flagStr = "add";
            if(mainGrid.curPage == mainGrid.totalPage 
                &amp;&amp; (mainGrid.dataProvider as ArrayCollection).length &lt; mainGrid.pageCount)
                handle_server_method("bugManagerAPI","BugManagerAPI","showUserApllyByID",
                    [applyIDNow], addUserApllyAfterHandle);
            else
                mainGridArray = ['bugManagerAPI', 'BugManagerAPI', 'uServiceHomePageFast', [],flagStr];
        }else
            //更新表格数据
            mainGridArray = ['bugManagerAPI', 'BugManagerAPI', 'uServiceHomePageFast', []];
    }else{
        handle_server_method("bugManagerAPI","BugManagerAPI","showUserApllyByID",
            [userApplyID], modUserApllyAfterHandle);
    }*/</span>
    
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**
 * 如果当前页码为最后一页,并且表格未满,就直接向表格追加用户刚刚插入的数据
 */</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addUserApllyAfterHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addItem</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">totalCount</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">totalCount</span><span class="ActionScriptOperator">+</span>1;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**
 * 将从后台查询到的一条更新请求记录存入主页表格选择的数据位置处
 * 此函数主要是为了减少对数据库的分页查询
 */</span> 
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">modUserApllyAfterHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getResultObj</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setItemAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">,</span><span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>



<span class="ActionScriptComment">//将界面中的用户修改的值存入userApply对象之中
</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">storeValue2userApply</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">UserApplyVO</span><span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptDefault_Text">apply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">UserApplyVO</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    
    
    <span class="ActionScriptComment">//对象处理:bug系统,bug影响范围,bug实际影响范围,bug重要程度,请求单状态
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">module</span>:<span class="ActionScriptDefault_Text">SystemModuleVO</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SystemModuleVO</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">module</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">moduleID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"moduleID"</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">bugModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">moduleID</span>:<span class="ActionScriptDefault_Text">bugModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span>
        <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sysModule</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">moduleID</span>:<span class="ActionScriptString">"-1"</span>;
    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sysModule</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">module</span>;
    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">system</span>:<span class="ActionScriptDefault_Text">SupportSystemVO</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SupportSystemVO</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">system</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">hasOwnProperty</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"systemID"</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">bugSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span>:<span class="ActionScriptDefault_Text">bugSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sText</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span>
        <span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">systemID</span>:<span class="ActionScriptOperator">-</span>1;
    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">belongSystem</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">system</span>;
    
<span class="ActionScriptComment">//    var module:SystemModuleVO = new SystemModuleVO();
</span><span class="ActionScriptComment">//    if(bugModule.selectedItem != null)
</span><span class="ActionScriptComment">//        module.moduleID = bugModule.selectedItem.moduleID;
</span><span class="ActionScriptComment">//    apply.sysModule = module;
</span><span class="ActionScriptComment">//    
</span><span class="ActionScriptComment">//    var system:SupportSystemVO = new SupportSystemVO();
</span><span class="ActionScriptComment">//    if(bugSystem.selectedItem != null)
</span><span class="ActionScriptComment">//        system.systemID = bugSystem.selectedItem.systemID;
</span><span class="ActionScriptComment">//    apply.belongSystem = system;
</span>    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">range</span>:<span class="ActionScriptDefault_Text">ConstDetailVO</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ConstDetailVO</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bugRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">range</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugRange</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">range</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">range</span>;
    
    <span class="ActionScriptComment">//var realRange:ConstDetailVO = new ConstDetailVO();
</span>    <span class="ActionScriptComment">//if(bugRealRange.selectedItem != null)
</span>        <span class="ActionScriptComment">//realRange.id = bugRealRange.selectedItem.id;
</span>    <span class="ActionScriptComment">//apply.realRange = realRange;
</span>    
    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">urgent</span>:<span class="ActionScriptDefault_Text">ReplyLevelVO</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ReplyLevelVO</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bugUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">urgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyLevelId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bugUrgent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replyLevelId</span>;
    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urgent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">urgent</span>;
    
    <span class="ActionScriptComment">//这里的状态在具体的业务中会有不同的处理,比如说:呈报
</span>    <span class="ActionScriptComment">//请求状态：0—未提交，1—未受理，2—处理中，3—完成
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">statusID</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"mod"</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span>:<span class="ActionScriptDefault_Text">statusID</span>;
    <span class="ActionScriptReserved">else</span>
        <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">statusID</span>;
    
    
    <span class="ActionScriptComment">//可以确定：主题摘要、电话、请求单id
</span>    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyTitle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">applyTitleInput</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span>;
    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">telephone</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">telephoneInput</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span>;
    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">idFlag</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptBracket/Brace">)</span>;
    
    
    
    <span class="ActionScriptComment">//请求单填写者
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">applyEntry</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptDefault_Text">applyEntry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    <span class="ActionScriptDefault_Text">applyEntry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">personId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">msPerson</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    <span class="ActionScriptDefault_Text">applyEntry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">companyID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">companyId</span>;
    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyEntry</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">applyEntry</span>;
    
    
    <span class="ActionScriptComment">//提出请求的具体用户
</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sponsor</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptDefault_Text">sponsor</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span>;
    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sponsor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">sponsor</span>;
    
    
    <span class="ActionScriptComment">//公司与部门
</span>    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">company</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">company</span>;
    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">department</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">appCore</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">loginUser</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">department</span>;
    
    
    <span class="ActionScriptComment">//用户请求单编号
</span>    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">idFlag</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userApplyCode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">codeStr</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span>
        <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userApplyCode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userApplyCode</span>;
    
    <span class="ActionScriptComment">//时间处理
</span>    <span class="ActionScriptDefault_Text">applyDateHandle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptBracket/Brace">)</span>;
    
    <span class="ActionScriptComment">//文本框
</span>    <span class="ActionScriptComment">//apply.reason = reasonArea != null?BugUtil.myTrim(reasonArea.text):"";
</span>    <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">directions</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">directionsArea</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">BugUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">myTrim</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">directionsArea</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">text</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptString">""</span>;
    <span class="ActionScriptComment">//apply.solutions = solutionsArea!=null?BugUtil.myTrim(solutionsArea.text):"";
</span>    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span>;
        <span class="ActionScriptDefault_Text">apply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DR</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DR</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">apply</span>;
<span class="ActionScriptBracket/Brace">}</span>



<span class="ActionScriptComment">//========================修改和新增状态下的按钮事件：的保存、取消、呈报=========================
</span>
<span class="ActionScriptASDoc">/**项选中事件:弹出或隐藏审批历史*/</span>
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">b_mainGrid_itemClickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ListEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">b_mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span>;
    <span class="ActionScriptDefault_Text">subDemandID</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subDemandObj</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span> : <span class="ActionScriptString">""</span>;
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flow_index</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">b_mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">b_mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptOperator">-</span>1
        <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">demandStatus</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptDefault_Text">flow_index</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">b_mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span>;
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptComment">// &amp;&amp; obj.flowId!=null
</span>            <span class="ActionScriptDefault_Text">b_AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getApproveHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">US_FLOW_TYPE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">userDemandId</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptDefault_Text">b_AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        <span class="ActionScriptDefault_Text">b_AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">includeInLayout</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptDefault_Text">b_hideFlowHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subDemandObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">demandStatus</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">b_mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">=</span> -1;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**项选中事件:弹出或隐藏审批历史*/</span>
<span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">mainGrid_itemClickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ListEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">userApply</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedItem</span>;
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span> <span class="ActionScriptOperator">==</span> 3<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">brotherBtn</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">brotherBtn</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flow_index</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptOperator">-</span>1
        <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptDefault_Text">flow_index</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span>;
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span><span class="ActionScriptComment">// &amp;&amp; obj.flowId!=null
</span>            <span class="ActionScriptDefault_Text">AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getApproveHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyType</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyId</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptDefault_Text">AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        <span class="ActionScriptDefault_Text">AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">includeInLayout</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
        
    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
        
        <span class="ActionScriptDefault_Text">hideFlowHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userApply</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">applyStatus</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">mainGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">=</span> -1;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**隐藏流程审批历史表格图*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">b_hideFlowHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">b_AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptDefault_Text">b_AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">includeInLayout</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    
    <span class="ActionScriptDefault_Text">flow_index</span> <span class="ActionScriptOperator">=</span> -1;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**隐藏流程审批历史表格图*/</span>
<span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">hideFlowHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    <span class="ActionScriptDefault_Text">AppHistoryGrid</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">includeInLayout</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
    
    <span class="ActionScriptDefault_Text">flow_index</span> <span class="ActionScriptOperator">=</span> -1;
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptASDoc">/**预测用户操作:查看,修改等,隐藏审批历史*/</span>
<span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">hgroup1_mouseOverHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptDefault_Text">hideFlowHistory</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
<span class="ActionScriptBracket/Brace">}</span>
</pre></body>
</html>
